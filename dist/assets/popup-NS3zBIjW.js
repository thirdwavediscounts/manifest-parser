import{c as It,g as ce,r as de,u as fe,a as he,f as pe,d as me,n as ge,s as _e,b as ye}from"./proxy-config-OqE8FvQS.js";(function(){const S=document.createElement("link").relList;if(S&&S.supports&&S.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))w(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&w(s)}).observe(document,{childList:!0,subtree:!0});function r(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function w(u){if(u.ep)return;u.ep=!0;const o=r(u);fetch(u.href,o)}})();const Lt={accessories:"Acc",electronics:"Elec",appliances:"Appl",computer:"Comp",technology:"Tech",hardware:"HW",software:"SW",furniture:"Furn",equipment:"Equip",warehouse:"WH",household:"HH"};function be(b){if(!b)return"";const S=new RegExp(`\\b(${Object.keys(Lt).join("|")})\\b`,"gi");return b.replace(S,r=>Lt[r.toLowerCase()])}function we(b,S){if(!b||S<=0)return"";if(b.length<=S)return b;const r=b.substring(0,S),w=r.lastIndexOf("-");return w===-1||b.length===S||b[S]==="-"?r:b.substring(0,w)}function ve(b){if(!b||!b.includes("&"))return b;const S=b.split(/\s*&\s*/);if(S.length<2)return b;const r={};for(const o of S){const s=o.split(/\s+/);for(const n of s){const l=n.toLowerCase();r[l]=(r[l]||0)+1}}const w=Object.keys(r).filter(o=>r[o]>1&&o.length>2);if(w.length===0)return b;let u=b;for(const o of w){const s=new RegExp(`\\b${o}\\b`,"gi"),n=[];let l;for(;(l=s.exec(u))!==null;)n.push({index:l.index,match:l[0]});if(n.length>1){const v=n.length-1;for(let p=v-1;p>=0;p--){const m=n[p],i=u.substring(0,m.index),d=u.substring(m.index+m.match.length);u=(i.trimEnd()+" "+d.trimStart()).replace(/\s+/g," ")}const y=Lt[o.toLowerCase()];y&&(u=u.replace(new RegExp(`\\b${o}\\b`,"gi"),y))}}return u.trim()}function ke(b,S){if(!b||S<=0)return"";let r=ve(b);return r=be(r),r=r.replace(/\s+/g,"-"),r=we(r,S),r}function Gt(b){const S=b.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return S?S[1]:null}async function Ft(b=!0){return new Promise((S,r)=>{chrome.identity.getAuthToken({interactive:b},w=>{if(chrome.runtime.lastError){r(new Error(chrome.runtime.lastError.message));return}if(!w){r(new Error("Failed to get auth token"));return}S(w)})})}async function Vt(b){return new Promise(S=>{chrome.identity.removeCachedAuthToken({token:b},()=>{S()})})}async function xe(b,S="A:A"){const r=await Ft(),w=`https://sheets.googleapis.com/v4/spreadsheets/${b}/values/${S}`,u=await fetch(w,{headers:{Authorization:`Bearer ${r}`}});if(!u.ok)throw u.status===401?(await Vt(r),new Error("Authentication expired. Please try again.")):new Error(`Failed to fetch sheet: ${u.status} ${u.statusText}`);const o=await u.json();return{urls:(o.values||[]).flat().filter(l=>l&&Ee(l)).map(l=>l.trim()),sheetTitle:o.range||"Sheet"}}function Ee(b){try{const S=new URL(b);return S.protocol==="http:"||S.protocol==="https:"}catch{return!1}}async function Se(){try{return await Ft(!1),!0}catch{return!1}}async function Ce(){try{const b=await Ft(!1);await Vt(b),await fetch(`https://accounts.google.com/o/oauth2/revoke?token=${b}`)}catch{}}function zt(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Kt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(b,S){(function(r){b.exports=r()})(function(){return function r(w,u,o){function s(v,y){if(!u[v]){if(!w[v]){var p=typeof zt=="function"&&zt;if(!y&&p)return p(v,!0);if(n)return n(v,!0);var m=new Error("Cannot find module '"+v+"'");throw m.code="MODULE_NOT_FOUND",m}var i=u[v]={exports:{}};w[v][0].call(i.exports,function(d){var a=w[v][1][d];return s(a||d)},i,i.exports,r,w,u,o)}return u[v].exports}for(var n=typeof zt=="function"&&zt,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(r,w,u){var o=r("./utils"),s=r("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(l){for(var v,y,p,m,i,d,a,h=[],c=0,_=l.length,x=_,A=o.getTypeOf(l)!=="string";c<l.length;)x=_-c,p=A?(v=l[c++],y=c<_?l[c++]:0,c<_?l[c++]:0):(v=l.charCodeAt(c++),y=c<_?l.charCodeAt(c++):0,c<_?l.charCodeAt(c++):0),m=v>>2,i=(3&v)<<4|y>>4,d=1<x?(15&y)<<2|p>>6:64,a=2<x?63&p:64,h.push(n.charAt(m)+n.charAt(i)+n.charAt(d)+n.charAt(a));return h.join("")},u.decode=function(l){var v,y,p,m,i,d,a=0,h=0,c="data:";if(l.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var _,x=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===n.charAt(64)&&x--,l.charAt(l.length-2)===n.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|x):new Array(0|x);a<l.length;)v=n.indexOf(l.charAt(a++))<<2|(m=n.indexOf(l.charAt(a++)))>>4,y=(15&m)<<4|(i=n.indexOf(l.charAt(a++)))>>2,p=(3&i)<<6|(d=n.indexOf(l.charAt(a++))),_[h++]=v,i!==64&&(_[h++]=y),d!==64&&(_[h++]=p);return _}},{"./support":30,"./utils":32}],2:[function(r,w,u){var o=r("./external"),s=r("./stream/DataWorker"),n=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function v(y,p,m,i,d){this.compressedSize=y,this.uncompressedSize=p,this.crc32=m,this.compression=i,this.compressedContent=d}v.prototype={getContentWorker:function(){var y=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return y.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(y,p,m){return y.pipe(new n).pipe(new l("uncompressedSize")).pipe(p.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},w.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,w,u){var o=r("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},u.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,w,u){var o=r("./utils"),s=function(){for(var n,l=[],v=0;v<256;v++){n=v;for(var y=0;y<8;y++)n=1&n?3988292384^n>>>1:n>>>1;l[v]=n}return l}();w.exports=function(n,l){return n!==void 0&&n.length?o.getTypeOf(n)!=="string"?function(v,y,p,m){var i=s,d=m+p;v^=-1;for(var a=m;a<d;a++)v=v>>>8^i[255&(v^y[a])];return-1^v}(0|l,n,n.length,0):function(v,y,p,m){var i=s,d=m+p;v^=-1;for(var a=m;a<d;a++)v=v>>>8^i[255&(v^y.charCodeAt(a))];return-1^v}(0|l,n,n.length,0):0}},{"./utils":32}],5:[function(r,w,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(r,w,u){var o=null;o=typeof Promise<"u"?Promise:r("lie"),w.exports={Promise:o}},{lie:37}],7:[function(r,w,u){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=r("pako"),n=r("./utils"),l=r("./stream/GenericWorker"),v=o?"uint8array":"array";function y(p,m){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=m,this.meta={}}u.magic="\b\0",n.inherits(y,l),y.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(v,p.data),!1)},y.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(m){p.push({data:m,meta:p.meta})}},u.compressWorker=function(p){return new y("Deflate",p)},u.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,w,u){function o(i,d){var a,h="";for(a=0;a<d;a++)h+=String.fromCharCode(255&i),i>>>=8;return h}function s(i,d,a,h,c,_){var x,A,C=i.file,U=i.compression,T=_!==v.utf8encode,j=n.transformTo("string",_(C.name)),F=n.transformTo("string",v.utf8encode(C.name)),H=C.comment,Q=n.transformTo("string",_(H)),k=n.transformTo("string",v.utf8encode(H)),R=F.length!==C.name.length,e=k.length!==H.length,L="",et="",M="",rt=C.dir,$=C.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};d&&!a||(tt.crc32=i.crc32,tt.compressedSize=i.compressedSize,tt.uncompressedSize=i.uncompressedSize);var B=0;d&&(B|=8),T||!R&&!e||(B|=2048);var z=0,J=0;rt&&(z|=16),c==="UNIX"?(J=798,z|=function(V,ot){var dt=V;return V||(dt=ot?16893:33204),(65535&dt)<<16}(C.unixPermissions,rt)):(J=20,z|=function(V){return 63&(V||0)}(C.dosPermissions)),x=$.getUTCHours(),x<<=6,x|=$.getUTCMinutes(),x<<=5,x|=$.getUTCSeconds()/2,A=$.getUTCFullYear()-1980,A<<=4,A|=$.getUTCMonth()+1,A<<=5,A|=$.getUTCDate(),R&&(et=o(1,1)+o(y(j),4)+F,L+="up"+o(et.length,2)+et),e&&(M=o(1,1)+o(y(Q),4)+k,L+="uc"+o(M.length,2)+M);var K="";return K+=`
\0`,K+=o(B,2),K+=U.magic,K+=o(x,2),K+=o(A,2),K+=o(tt.crc32,4),K+=o(tt.compressedSize,4),K+=o(tt.uncompressedSize,4),K+=o(j.length,2),K+=o(L.length,2),{fileRecord:p.LOCAL_FILE_HEADER+K+j+L,dirRecord:p.CENTRAL_FILE_HEADER+o(J,2)+K+o(Q.length,2)+"\0\0\0\0"+o(z,4)+o(h,4)+j+L+Q}}var n=r("../utils"),l=r("../stream/GenericWorker"),v=r("../utf8"),y=r("../crc32"),p=r("../signature");function m(i,d,a,h){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=d,this.zipPlatform=a,this.encodeFileName=h,this.streamFiles=i,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(m,l),m.prototype.push=function(i){var d=i.meta.percent||0,a=this.entriesCount,h=this._sources.length;this.accumulate?this.contentBuffer.push(i):(this.bytesWritten+=i.data.length,l.prototype.push.call(this,{data:i.data,meta:{currentFile:this.currentFile,percent:a?(d+100*(a-h-1))/a:100}}))},m.prototype.openedSource=function(i){this.currentSourceOffset=this.bytesWritten,this.currentFile=i.file.name;var d=this.streamFiles&&!i.file.dir;if(d){var a=s(i,d,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(i){this.accumulate=!1;var d=this.streamFiles&&!i.file.dir,a=s(i,d,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),d)this.push({data:function(h){return p.DATA_DESCRIPTOR+o(h.crc32,4)+o(h.compressedSize,4)+o(h.uncompressedSize,4)}(i),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var i=this.bytesWritten,d=0;d<this.dirRecords.length;d++)this.push({data:this.dirRecords[d],meta:{percent:100}});var a=this.bytesWritten-i,h=function(c,_,x,A,C){var U=n.transformTo("string",C(A));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(c,2)+o(c,2)+o(_,4)+o(x,4)+o(U.length,2)+U}(this.dirRecords.length,a,i,this.zipComment,this.encodeFileName);this.push({data:h,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(i){this._sources.push(i);var d=this;return i.on("data",function(a){d.processChunk(a)}),i.on("end",function(){d.closedSource(d.previous.streamInfo),d._sources.length?d.prepareNextSource():d.end()}),i.on("error",function(a){d.error(a)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(i){var d=this._sources;if(!l.prototype.error.call(this,i))return!1;for(var a=0;a<d.length;a++)try{d[a].error(i)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var i=this._sources,d=0;d<i.length;d++)i[d].lock()},w.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,w,u){var o=r("../compressions"),s=r("./ZipFileWorker");u.generateWorker=function(n,l,v){var y=new s(l.streamFiles,v,l.platform,l.encodeFileName),p=0;try{n.forEach(function(m,i){p++;var d=function(_,x){var A=_||x,C=o[A];if(!C)throw new Error(A+" is not a valid compression method !");return C}(i.options.compression,l.compression),a=i.options.compressionOptions||l.compressionOptions||{},h=i.dir,c=i.date;i._compressWorker(d,a).withStreamInfo("file",{name:m,dir:h,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(y)}),y.entriesCount=p}catch(m){y.error(m)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,w,u){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var n in this)typeof this[n]!="function"&&(s[n]=this[n]);return s}}(o.prototype=r("./object")).loadAsync=r("./load"),o.support=r("./support"),o.defaults=r("./defaults"),o.version="3.10.1",o.loadAsync=function(s,n){return new o().loadAsync(s,n)},o.external=r("./external"),w.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,w,u){var o=r("./utils"),s=r("./external"),n=r("./utf8"),l=r("./zipEntries"),v=r("./stream/Crc32Probe"),y=r("./nodejsUtils");function p(m){return new s.Promise(function(i,d){var a=m.decompressed.getContentWorker().pipe(new v);a.on("error",function(h){d(h)}).on("end",function(){a.streamInfo.crc32!==m.decompressed.crc32?d(new Error("Corrupted zip : CRC32 mismatch")):i()}).resume()})}w.exports=function(m,i){var d=this;return i=o.extend(i||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),y.isNode&&y.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",m,!0,i.optimizedBinaryString,i.base64).then(function(a){var h=new l(i);return h.load(a),h}).then(function(a){var h=[s.Promise.resolve(a)],c=a.files;if(i.checkCRC32)for(var _=0;_<c.length;_++)h.push(p(c[_]));return s.Promise.all(h)}).then(function(a){for(var h=a.shift(),c=h.files,_=0;_<c.length;_++){var x=c[_],A=x.fileNameStr,C=o.resolve(x.fileNameStr);d.file(C,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:i.createFolders}),x.dir||(d.file(C).unsafeOriginalName=A)}return h.zipComment.length&&(d.comment=h.zipComment),d})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,w,u){var o=r("../utils"),s=r("../stream/GenericWorker");function n(l,v){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(v)}o.inherits(n,s),n.prototype._bindStream=function(l){var v=this;(this._stream=l).pause(),l.on("data",function(y){v.push({data:y,meta:{percent:0}})}).on("error",function(y){v.isPaused?this.generatedError=y:v.error(y)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},n.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},w.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,w,u){var o=r("readable-stream").Readable;function s(n,l,v){o.call(this,l),this._helper=n;var y=this;n.on("data",function(p,m){y.push(p)||y._helper.pause(),v&&v(m)}).on("error",function(p){y.emit("error",p)}).on("end",function(){y.push(null)})}r("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},w.exports=s},{"../utils":32,"readable-stream":16}],14:[function(r,w,u){w.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(r,w,u){function o(C,U,T){var j,F=n.getTypeOf(U),H=n.extend(T||{},y);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(C=c(C)),H.createFolders&&(j=h(C))&&_.call(this,j,!0);var Q=F==="string"&&H.binary===!1&&H.base64===!1;T&&T.binary!==void 0||(H.binary=!Q),(U instanceof p&&U.uncompressedSize===0||H.dir||!U||U.length===0)&&(H.base64=!1,H.binary=!0,U="",H.compression="STORE",F="string");var k=null;k=U instanceof p||U instanceof l?U:d.isNode&&d.isStream(U)?new a(C,U):n.prepareContent(C,U,H.binary,H.optimizedBinaryString,H.base64);var R=new m(C,k,H);this.files[C]=R}var s=r("./utf8"),n=r("./utils"),l=r("./stream/GenericWorker"),v=r("./stream/StreamHelper"),y=r("./defaults"),p=r("./compressedObject"),m=r("./zipObject"),i=r("./generate"),d=r("./nodejsUtils"),a=r("./nodejs/NodejsStreamInputAdapter"),h=function(C){C.slice(-1)==="/"&&(C=C.substring(0,C.length-1));var U=C.lastIndexOf("/");return 0<U?C.substring(0,U):""},c=function(C){return C.slice(-1)!=="/"&&(C+="/"),C},_=function(C,U){return U=U!==void 0?U:y.createFolders,C=c(C),this.files[C]||o.call(this,C,null,{dir:!0,createFolders:U}),this.files[C]};function x(C){return Object.prototype.toString.call(C)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(C){var U,T,j;for(U in this.files)j=this.files[U],(T=U.slice(this.root.length,U.length))&&U.slice(0,this.root.length)===this.root&&C(T,j)},filter:function(C){var U=[];return this.forEach(function(T,j){C(T,j)&&U.push(j)}),U},file:function(C,U,T){if(arguments.length!==1)return C=this.root+C,o.call(this,C,U,T),this;if(x(C)){var j=C;return this.filter(function(H,Q){return!Q.dir&&j.test(H)})}var F=this.files[this.root+C];return F&&!F.dir?F:null},folder:function(C){if(!C)return this;if(x(C))return this.filter(function(F,H){return H.dir&&C.test(F)});var U=this.root+C,T=_.call(this,U),j=this.clone();return j.root=T.name,j},remove:function(C){C=this.root+C;var U=this.files[C];if(U||(C.slice(-1)!=="/"&&(C+="/"),U=this.files[C]),U&&!U.dir)delete this.files[C];else for(var T=this.filter(function(F,H){return H.name.slice(0,C.length)===C}),j=0;j<T.length;j++)delete this.files[T[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(C){var U,T={};try{if((T=n.extend(C||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");n.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var j=T.comment||this.comment||"";U=i.generateWorker(this,T,j)}catch(F){(U=new l("error")).error(F)}return new v(U,T.type||"string",T.mimeType)},generateAsync:function(C,U){return this.generateInternalStream(C).accumulate(U)},generateNodeStream:function(C,U){return(C=C||{}).type||(C.type="nodebuffer"),this.generateInternalStream(C).toNodejsStream(U)}};w.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,w,u){w.exports=r("stream")},{stream:void 0}],17:[function(r,w,u){var o=r("./DataReader");function s(n){o.call(this,n);for(var l=0;l<this.data.length;l++)n[l]=255&n[l]}r("../utils").inherits(s,o),s.prototype.byteAt=function(n){return this.data[this.zero+n]},s.prototype.lastIndexOfSignature=function(n){for(var l=n.charCodeAt(0),v=n.charCodeAt(1),y=n.charCodeAt(2),p=n.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===v&&this.data[m+2]===y&&this.data[m+3]===p)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(n){var l=n.charCodeAt(0),v=n.charCodeAt(1),y=n.charCodeAt(2),p=n.charCodeAt(3),m=this.readData(4);return l===m[0]&&v===m[1]&&y===m[2]&&p===m[3]},s.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},w.exports=s},{"../utils":32,"./DataReader":18}],18:[function(r,w,u){var o=r("../utils");function s(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var l,v=0;for(this.checkOffset(n),l=this.index+n-1;l>=this.index;l--)v=(v<<8)+this.byteAt(l);return this.index+=n,v},readString:function(n){return o.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},w.exports=s},{"../utils":32}],19:[function(r,w,u){var o=r("./Uint8ArrayReader");function s(n){o.call(this,n)}r("../utils").inherits(s,o),s.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},w.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,w,u){var o=r("./DataReader");function s(n){o.call(this,n)}r("../utils").inherits(s,o),s.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},s.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},s.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},s.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},w.exports=s},{"../utils":32,"./DataReader":18}],21:[function(r,w,u){var o=r("./ArrayReader");function s(n){o.call(this,n)}r("../utils").inherits(s,o),s.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},w.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(r,w,u){var o=r("../utils"),s=r("../support"),n=r("./ArrayReader"),l=r("./StringReader"),v=r("./NodeBufferReader"),y=r("./Uint8ArrayReader");w.exports=function(p){var m=o.getTypeOf(p);return o.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new v(p):s.uint8array?new y(o.transformTo("uint8array",p)):new n(o.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,w,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,w,u){var o=r("./GenericWorker"),s=r("../utils");function n(l){o.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(n,o),n.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},w.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(r,w,u){var o=r("./GenericWorker"),s=r("../crc32");function n(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(n,o),n.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},w.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,w,u){var o=r("../utils"),s=r("./GenericWorker");function n(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}o.inherits(n,s),n.prototype.processChunk=function(l){if(l){var v=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=v+l.data.length}s.prototype.processChunk.call(this,l)},w.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(r,w,u){var o=r("../utils"),s=r("./GenericWorker");function n(l){s.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(y){v.dataIsReady=!0,v.data=y,v.max=y&&y.length||0,v.type=o.getTypeOf(y),v.isPaused||v._tickAndRepeat()},function(y){v.error(y)})}o.inherits(n,s),n.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,v);break;case"uint8array":l=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":l=this.data.slice(this.index,v)}return this.index=v,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},w.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(r,w,u){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,n){return this._listeners[s].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,n){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,n)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var n=this;return s.on("data",function(l){n.processChunk(l)}),s.on("end",function(){n.end()}),s.on("error",function(l){n.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,n){return this.extraStreamInfo[s]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},w.exports=o},{}],29:[function(r,w,u){var o=r("../utils"),s=r("./ConvertWorker"),n=r("./GenericWorker"),l=r("../base64"),v=r("../support"),y=r("../external"),p=null;if(v.nodestream)try{p=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(d,a){return new y.Promise(function(h,c){var _=[],x=d._internalType,A=d._outputType,C=d._mimeType;d.on("data",function(U,T){_.push(U),a&&a(T)}).on("error",function(U){_=[],c(U)}).on("end",function(){try{var U=function(T,j,F){switch(T){case"blob":return o.newBlob(o.transformTo("arraybuffer",j),F);case"base64":return l.encode(j);default:return o.transformTo(T,j)}}(A,function(T,j){var F,H=0,Q=null,k=0;for(F=0;F<j.length;F++)k+=j[F].length;switch(T){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(Q=new Uint8Array(k),F=0;F<j.length;F++)Q.set(j[F],H),H+=j[F].length;return Q;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+T+"'")}}(x,_),C);h(U)}catch(T){c(T)}_=[]}).resume()})}function i(d,a,h){var c=a;switch(a){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=a,this._mimeType=h,o.checkSupport(c),this._worker=d.pipe(new s(c)),d.lock()}catch(_){this._worker=new n("error"),this._worker.error(_)}}i.prototype={accumulate:function(d){return m(this,d)},on:function(d,a){var h=this;return d==="data"?this._worker.on(d,function(c){a.call(h,c.data,c.meta)}):this._worker.on(d,function(){o.delay(a,arguments,h)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(d){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},d)}},w.exports=i},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,w,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",u.nodebuffer=typeof Buffer<"u",u.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")u.blob=!1;else{var o=new ArrayBuffer(0);try{u.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),u.blob=s.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!r("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(r,w,u){for(var o=r("./utils"),s=r("./support"),n=r("./nodejsUtils"),l=r("./stream/GenericWorker"),v=new Array(256),y=0;y<256;y++)v[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;v[254]=v[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}u.utf8encode=function(i){return s.nodebuffer?n.newBufferFrom(i,"utf-8"):function(d){var a,h,c,_,x,A=d.length,C=0;for(_=0;_<A;_++)(64512&(h=d.charCodeAt(_)))==55296&&_+1<A&&(64512&(c=d.charCodeAt(_+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),_++),C+=h<128?1:h<2048?2:h<65536?3:4;for(a=s.uint8array?new Uint8Array(C):new Array(C),_=x=0;x<C;_++)(64512&(h=d.charCodeAt(_)))==55296&&_+1<A&&(64512&(c=d.charCodeAt(_+1)))==56320&&(h=65536+(h-55296<<10)+(c-56320),_++),h<128?a[x++]=h:(h<2048?a[x++]=192|h>>>6:(h<65536?a[x++]=224|h>>>12:(a[x++]=240|h>>>18,a[x++]=128|h>>>12&63),a[x++]=128|h>>>6&63),a[x++]=128|63&h);return a}(i)},u.utf8decode=function(i){return s.nodebuffer?o.transformTo("nodebuffer",i).toString("utf-8"):function(d){var a,h,c,_,x=d.length,A=new Array(2*x);for(a=h=0;a<x;)if((c=d[a++])<128)A[h++]=c;else if(4<(_=v[c]))A[h++]=65533,a+=_-1;else{for(c&=_===2?31:_===3?15:7;1<_&&a<x;)c=c<<6|63&d[a++],_--;1<_?A[h++]=65533:c<65536?A[h++]=c:(c-=65536,A[h++]=55296|c>>10&1023,A[h++]=56320|1023&c)}return A.length!==h&&(A.subarray?A=A.subarray(0,h):A.length=h),o.applyFromCharCode(A)}(i=o.transformTo(s.uint8array?"uint8array":"array",i))},o.inherits(p,l),p.prototype.processChunk=function(i){var d=o.transformTo(s.uint8array?"uint8array":"array",i.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var a=d;(d=new Uint8Array(a.length+this.leftOver.length)).set(this.leftOver,0),d.set(a,this.leftOver.length)}else d=this.leftOver.concat(d);this.leftOver=null}var h=function(_,x){var A;for((x=x||_.length)>_.length&&(x=_.length),A=x-1;0<=A&&(192&_[A])==128;)A--;return A<0||A===0?x:A+v[_[A]]>x?A:x}(d),c=d;h!==d.length&&(s.uint8array?(c=d.subarray(0,h),this.leftOver=d.subarray(h,d.length)):(c=d.slice(0,h),this.leftOver=d.slice(h,d.length))),this.push({data:u.utf8decode(c),meta:i.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=p,o.inherits(m,l),m.prototype.processChunk=function(i){this.push({data:u.utf8encode(i.data),meta:i.meta})},u.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,w,u){var o=r("./support"),s=r("./base64"),n=r("./nodejsUtils"),l=r("./external");function v(a){return a}function y(a,h){for(var c=0;c<a.length;++c)h[c]=255&a.charCodeAt(c);return h}r("setimmediate"),u.newBlob=function(a,h){u.checkSupport("blob");try{return new Blob([a],{type:h})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(a),c.getBlob(h)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(a,h,c){var _=[],x=0,A=a.length;if(A<=c)return String.fromCharCode.apply(null,a);for(;x<A;)h==="array"||h==="nodebuffer"?_.push(String.fromCharCode.apply(null,a.slice(x,Math.min(x+c,A)))):_.push(String.fromCharCode.apply(null,a.subarray(x,Math.min(x+c,A)))),x+=c;return _.join("")},stringifyByChar:function(a){for(var h="",c=0;c<a.length;c++)h+=String.fromCharCode(a[c]);return h},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}}()}};function m(a){var h=65536,c=u.getTypeOf(a),_=!0;if(c==="uint8array"?_=p.applyCanBeUsed.uint8array:c==="nodebuffer"&&(_=p.applyCanBeUsed.nodebuffer),_)for(;1<h;)try{return p.stringifyByChunk(a,c,h)}catch{h=Math.floor(h/2)}return p.stringifyByChar(a)}function i(a,h){for(var c=0;c<a.length;c++)h[c]=a[c];return h}u.applyFromCharCode=m;var d={};d.string={string:v,array:function(a){return y(a,new Array(a.length))},arraybuffer:function(a){return d.string.uint8array(a).buffer},uint8array:function(a){return y(a,new Uint8Array(a.length))},nodebuffer:function(a){return y(a,n.allocBuffer(a.length))}},d.array={string:m,array:v,arraybuffer:function(a){return new Uint8Array(a).buffer},uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(a)}},d.arraybuffer={string:function(a){return m(new Uint8Array(a))},array:function(a){return i(new Uint8Array(a),new Array(a.byteLength))},arraybuffer:v,uint8array:function(a){return new Uint8Array(a)},nodebuffer:function(a){return n.newBufferFrom(new Uint8Array(a))}},d.uint8array={string:m,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return a.buffer},uint8array:v,nodebuffer:function(a){return n.newBufferFrom(a)}},d.nodebuffer={string:m,array:function(a){return i(a,new Array(a.length))},arraybuffer:function(a){return d.nodebuffer.uint8array(a).buffer},uint8array:function(a){return i(a,new Uint8Array(a.length))},nodebuffer:v},u.transformTo=function(a,h){if(h=h||"",!a)return h;u.checkSupport(a);var c=u.getTypeOf(h);return d[c][a](h)},u.resolve=function(a){for(var h=a.split("/"),c=[],_=0;_<h.length;_++){var x=h[_];x==="."||x===""&&_!==0&&_!==h.length-1||(x===".."?c.pop():c.push(x))}return c.join("/")},u.getTypeOf=function(a){return typeof a=="string"?"string":Object.prototype.toString.call(a)==="[object Array]"?"array":o.nodebuffer&&n.isBuffer(a)?"nodebuffer":o.uint8array&&a instanceof Uint8Array?"uint8array":o.arraybuffer&&a instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(a){if(!o[a.toLowerCase()])throw new Error(a+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(a){var h,c,_="";for(c=0;c<(a||"").length;c++)_+="\\x"+((h=a.charCodeAt(c))<16?"0":"")+h.toString(16).toUpperCase();return _},u.delay=function(a,h,c){setImmediate(function(){a.apply(c||null,h||[])})},u.inherits=function(a,h){function c(){}c.prototype=h.prototype,a.prototype=new c},u.extend=function(){var a,h,c={};for(a=0;a<arguments.length;a++)for(h in arguments[a])Object.prototype.hasOwnProperty.call(arguments[a],h)&&c[h]===void 0&&(c[h]=arguments[a][h]);return c},u.prepareContent=function(a,h,c,_,x){return l.Promise.resolve(h).then(function(A){return o.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new l.Promise(function(C,U){var T=new FileReader;T.onload=function(j){C(j.target.result)},T.onerror=function(j){U(j.target.error)},T.readAsArrayBuffer(A)}):A}).then(function(A){var C=u.getTypeOf(A);return C?(C==="arraybuffer"?A=u.transformTo("uint8array",A):C==="string"&&(x?A=s.decode(A):c&&_!==!0&&(A=function(U){return y(U,o.uint8array?new Uint8Array(U.length):new Array(U.length))}(A))),A):l.Promise.reject(new Error("Can't read the data of '"+a+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,w,u){var o=r("./reader/readerFor"),s=r("./utils"),n=r("./signature"),l=r("./zipEntry"),v=r("./support");function y(p){this.files=[],this.loadOptions=p}y.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(p)+")")}},isSignature:function(p,m){var i=this.reader.index;this.reader.setIndex(p);var d=this.reader.readString(4)===m;return this.reader.setIndex(i),d},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),m=v.uint8array?"uint8array":"array",i=s.transformTo(m,p);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,m,i,d=this.zip64EndOfCentralSize-44;0<d;)p=this.reader.readInt(2),m=this.reader.readInt(4),i=this.reader.readData(m),this.zip64ExtensibleData[p]={id:p,length:m,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,m;for(p=0;p<this.files.length;p++)m=this.files[p],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var m=p;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var d=m-i;if(0<d)this.isSignature(m,n.CENTRAL_FILE_HEADER)||(this.reader.zero=d);else if(d<0)throw new Error("Corrupted zip: missing "+Math.abs(d)+" bytes.")},prepareReader:function(p){this.reader=o(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},w.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,w,u){var o=r("./reader/readerFor"),s=r("./utils"),n=r("./compressedObject"),l=r("./crc32"),v=r("./utf8"),y=r("./compressions"),p=r("./support");function m(i,d){this.options=i,this.loadOptions=d}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(i){var d,a;if(i.skip(22),this.fileNameLength=i.readInt(2),a=i.readInt(2),this.fileName=i.readData(this.fileNameLength),i.skip(a),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((d=function(h){for(var c in y)if(Object.prototype.hasOwnProperty.call(y,c)&&y[c].magic===h)return y[c];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,d,i.readData(this.compressedSize))},readCentralPart:function(i){this.versionMadeBy=i.readInt(2),i.skip(2),this.bitFlag=i.readInt(2),this.compressionMethod=i.readString(2),this.date=i.readDate(),this.crc32=i.readInt(4),this.compressedSize=i.readInt(4),this.uncompressedSize=i.readInt(4);var d=i.readInt(2);if(this.extraFieldsLength=i.readInt(2),this.fileCommentLength=i.readInt(2),this.diskNumberStart=i.readInt(2),this.internalFileAttributes=i.readInt(2),this.externalFileAttributes=i.readInt(4),this.localHeaderOffset=i.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");i.skip(d),this.readExtraFields(i),this.parseZIP64ExtraField(i),this.fileComment=i.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var i=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),i==0&&(this.dosPermissions=63&this.externalFileAttributes),i==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var i=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=i.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=i.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=i.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(i){var d,a,h,c=i.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});i.index+4<c;)d=i.readInt(2),a=i.readInt(2),h=i.readData(a),this.extraFields[d]={id:d,length:a,value:h};i.setIndex(c)},handleUTF8:function(){var i=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var d=this.findExtraFieldUnicodePath();if(d!==null)this.fileNameStr=d;else{var a=s.transformTo(i,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var h=this.findExtraFieldUnicodeComment();if(h!==null)this.fileCommentStr=h;else{var c=s.transformTo(i,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var i=this.extraFields[28789];if(i){var d=o(i.value);return d.readInt(1)!==1||l(this.fileName)!==d.readInt(4)?null:v.utf8decode(d.readData(i.length-5))}return null},findExtraFieldUnicodeComment:function(){var i=this.extraFields[25461];if(i){var d=o(i.value);return d.readInt(1)!==1||l(this.fileComment)!==d.readInt(4)?null:v.utf8decode(d.readData(i.length-5))}return null}},w.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,w,u){function o(d,a,h){this.name=d,this.dir=h.dir,this.date=h.date,this.comment=h.comment,this.unixPermissions=h.unixPermissions,this.dosPermissions=h.dosPermissions,this._data=a,this._dataBinary=h.binary,this.options={compression:h.compression,compressionOptions:h.compressionOptions}}var s=r("./stream/StreamHelper"),n=r("./stream/DataWorker"),l=r("./utf8"),v=r("./compressedObject"),y=r("./stream/GenericWorker");o.prototype={internalStream:function(d){var a=null,h="string";try{if(!d)throw new Error("No output type specified.");var c=(h=d.toLowerCase())==="string"||h==="text";h!=="binarystring"&&h!=="text"||(h="string"),a=this._decompressWorker();var _=!this._dataBinary;_&&!c&&(a=a.pipe(new l.Utf8EncodeWorker)),!_&&c&&(a=a.pipe(new l.Utf8DecodeWorker))}catch(x){(a=new y("error")).error(x)}return new s(a,h,"")},async:function(d,a){return this.internalStream(d).accumulate(a)},nodeStream:function(d,a){return this.internalStream(d||"nodebuffer").toNodejsStream(a)},_compressWorker:function(d,a){if(this._data instanceof v&&this._data.compression.magic===d.magic)return this._data.getCompressedWorker();var h=this._decompressWorker();return this._dataBinary||(h=h.pipe(new l.Utf8EncodeWorker)),v.createWorkerFrom(h,d,a)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof y?this._data:new n(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<p.length;i++)o.prototype[p[i]]=m;w.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,w,u){(function(o){var s,n,l=o.MutationObserver||o.WebKitMutationObserver;if(l){var v=0,y=new l(d),p=o.document.createTextNode("");y.observe(p,{characterData:!0}),s=function(){p.data=v=++v%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var a=o.document.createElement("script");a.onreadystatechange=function(){d(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},o.document.documentElement.appendChild(a)}:function(){setTimeout(d,0)};else{var m=new o.MessageChannel;m.port1.onmessage=d,s=function(){m.port2.postMessage(0)}}var i=[];function d(){var a,h;n=!0;for(var c=i.length;c;){for(h=i,i=[],a=-1;++a<c;)h[a]();c=i.length}n=!1}w.exports=function(a){i.push(a)!==1||n||s()}}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,w,u){var o=r("immediate");function s(){}var n={},l=["REJECTED"],v=["FULFILLED"],y=["PENDING"];function p(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,c!==s&&a(this,c)}function m(c,_,x){this.promise=c,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function i(c,_,x){o(function(){var A;try{A=_(x)}catch(C){return n.reject(c,C)}A===c?n.reject(c,new TypeError("Cannot resolve promise with itself")):n.resolve(c,A)})}function d(c){var _=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof _=="function")return function(){_.apply(c,arguments)}}function a(c,_){var x=!1;function A(T){x||(x=!0,n.reject(c,T))}function C(T){x||(x=!0,n.resolve(c,T))}var U=h(function(){_(C,A)});U.status==="error"&&A(U.value)}function h(c,_){var x={};try{x.value=c(_),x.status="success"}catch(A){x.status="error",x.value=A}return x}(w.exports=p).prototype.finally=function(c){if(typeof c!="function")return this;var _=this.constructor;return this.then(function(x){return _.resolve(c()).then(function(){return x})},function(x){return _.resolve(c()).then(function(){throw x})})},p.prototype.catch=function(c){return this.then(null,c)},p.prototype.then=function(c,_){if(typeof c!="function"&&this.state===v||typeof _!="function"&&this.state===l)return this;var x=new this.constructor(s);return this.state!==y?i(x,this.state===v?c:_,this.outcome):this.queue.push(new m(x,c,_)),x},m.prototype.callFulfilled=function(c){n.resolve(this.promise,c)},m.prototype.otherCallFulfilled=function(c){i(this.promise,this.onFulfilled,c)},m.prototype.callRejected=function(c){n.reject(this.promise,c)},m.prototype.otherCallRejected=function(c){i(this.promise,this.onRejected,c)},n.resolve=function(c,_){var x=h(d,_);if(x.status==="error")return n.reject(c,x.value);var A=x.value;if(A)a(c,A);else{c.state=v,c.outcome=_;for(var C=-1,U=c.queue.length;++C<U;)c.queue[C].callFulfilled(_)}return c},n.reject=function(c,_){c.state=l,c.outcome=_;for(var x=-1,A=c.queue.length;++x<A;)c.queue[x].callRejected(_);return c},p.resolve=function(c){return c instanceof this?c:n.resolve(new this(s),c)},p.reject=function(c){var _=new this(s);return n.reject(_,c)},p.all=function(c){var _=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=c.length,A=!1;if(!x)return this.resolve([]);for(var C=new Array(x),U=0,T=-1,j=new this(s);++T<x;)F(c[T],T);return j;function F(H,Q){_.resolve(H).then(function(k){C[Q]=k,++U!==x||A||(A=!0,n.resolve(j,C))},function(k){A||(A=!0,n.reject(j,k))})}},p.race=function(c){var _=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=c.length,A=!1;if(!x)return this.resolve([]);for(var C=-1,U=new this(s);++C<x;)T=c[C],_.resolve(T).then(function(j){A||(A=!0,n.resolve(U,j))},function(j){A||(A=!0,n.reject(U,j))});var T;return U}},{immediate:36}],38:[function(r,w,u){var o={};(0,r("./lib/utils/common").assign)(o,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),w.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,w,u){var o=r("./zlib/deflate"),s=r("./utils/common"),n=r("./utils/strings"),l=r("./zlib/messages"),v=r("./zlib/zstream"),y=Object.prototype.toString,p=0,m=-1,i=0,d=8;function a(c){if(!(this instanceof a))return new a(c);this.options=s.assign({level:m,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:i,to:""},c||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var x=o.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(x!==p)throw new Error(l[x]);if(_.header&&o.deflateSetHeader(this.strm,_.header),_.dictionary){var A;if(A=typeof _.dictionary=="string"?n.string2buf(_.dictionary):y.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(x=o.deflateSetDictionary(this.strm,A))!==p)throw new Error(l[x]);this._dict_set=!0}}function h(c,_){var x=new a(_);if(x.push(c,!0),x.err)throw x.msg||l[x.err];return x.result}a.prototype.push=function(c,_){var x,A,C=this.strm,U=this.options.chunkSize;if(this.ended)return!1;A=_===~~_?_:_===!0?4:0,typeof c=="string"?C.input=n.string2buf(c):y.call(c)==="[object ArrayBuffer]"?C.input=new Uint8Array(c):C.input=c,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new s.Buf8(U),C.next_out=0,C.avail_out=U),(x=o.deflate(C,A))!==1&&x!==p)return this.onEnd(x),!(this.ended=!0);C.avail_out!==0&&(C.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(s.shrinkBuf(C.output,C.next_out))):this.onData(s.shrinkBuf(C.output,C.next_out)))}while((0<C.avail_in||C.avail_out===0)&&x!==1);return A===4?(x=o.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===p):A!==2||(this.onEnd(p),!(C.avail_out=0))},a.prototype.onData=function(c){this.chunks.push(c)},a.prototype.onEnd=function(c){c===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},u.Deflate=a,u.deflate=h,u.deflateRaw=function(c,_){return(_=_||{}).raw=!0,h(c,_)},u.gzip=function(c,_){return(_=_||{}).gzip=!0,h(c,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,w,u){var o=r("./zlib/inflate"),s=r("./utils/common"),n=r("./utils/strings"),l=r("./zlib/constants"),v=r("./zlib/messages"),y=r("./zlib/zstream"),p=r("./zlib/gzheader"),m=Object.prototype.toString;function i(a){if(!(this instanceof i))return new i(a);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},a||{});var h=this.options;h.raw&&0<=h.windowBits&&h.windowBits<16&&(h.windowBits=-h.windowBits,h.windowBits===0&&(h.windowBits=-15)),!(0<=h.windowBits&&h.windowBits<16)||a&&a.windowBits||(h.windowBits+=32),15<h.windowBits&&h.windowBits<48&&!(15&h.windowBits)&&(h.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var c=o.inflateInit2(this.strm,h.windowBits);if(c!==l.Z_OK)throw new Error(v[c]);this.header=new p,o.inflateGetHeader(this.strm,this.header)}function d(a,h){var c=new i(h);if(c.push(a,!0),c.err)throw c.msg||v[c.err];return c.result}i.prototype.push=function(a,h){var c,_,x,A,C,U,T=this.strm,j=this.options.chunkSize,F=this.options.dictionary,H=!1;if(this.ended)return!1;_=h===~~h?h:h===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof a=="string"?T.input=n.binstring2buf(a):m.call(a)==="[object ArrayBuffer]"?T.input=new Uint8Array(a):T.input=a,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new s.Buf8(j),T.next_out=0,T.avail_out=j),(c=o.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(U=typeof F=="string"?n.string2buf(F):m.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,c=o.inflateSetDictionary(this.strm,U)),c===l.Z_BUF_ERROR&&H===!0&&(c=l.Z_OK,H=!1),c!==l.Z_STREAM_END&&c!==l.Z_OK)return this.onEnd(c),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&c!==l.Z_STREAM_END&&(T.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=n.utf8border(T.output,T.next_out),A=T.next_out-x,C=n.buf2string(T.output,x),T.next_out=A,T.avail_out=j-A,A&&s.arraySet(T.output,T.output,x,A,0),this.onData(C)):this.onData(s.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(H=!0)}while((0<T.avail_in||T.avail_out===0)&&c!==l.Z_STREAM_END);return c===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(c=o.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},i.prototype.onData=function(a){this.chunks.push(a)},i.prototype.onEnd=function(a){a===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},u.Inflate=i,u.inflate=d,u.inflateRaw=function(a,h){return(h=h||{}).raw=!0,d(a,h)},u.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,w,u){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";u.assign=function(l){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var y=v.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var p in y)y.hasOwnProperty(p)&&(l[p]=y[p])}}return l},u.shrinkBuf=function(l,v){return l.length===v?l:l.subarray?l.subarray(0,v):(l.length=v,l)};var s={arraySet:function(l,v,y,p,m){if(v.subarray&&l.subarray)l.set(v.subarray(y,y+p),m);else for(var i=0;i<p;i++)l[m+i]=v[y+i]},flattenChunks:function(l){var v,y,p,m,i,d;for(v=p=0,y=l.length;v<y;v++)p+=l[v].length;for(d=new Uint8Array(p),v=m=0,y=l.length;v<y;v++)i=l[v],d.set(i,m),m+=i.length;return d}},n={arraySet:function(l,v,y,p,m){for(var i=0;i<p;i++)l[m+i]=v[y+i]},flattenChunks:function(l){return[].concat.apply([],l)}};u.setTyped=function(l){l?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,s)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,n))},u.setTyped(o)},{}],42:[function(r,w,u){var o=r("./common"),s=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var l=new o.Buf8(256),v=0;v<256;v++)l[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function y(p,m){if(m<65537&&(p.subarray&&n||!p.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(p,m));for(var i="",d=0;d<m;d++)i+=String.fromCharCode(p[d]);return i}l[254]=l[254]=1,u.string2buf=function(p){var m,i,d,a,h,c=p.length,_=0;for(a=0;a<c;a++)(64512&(i=p.charCodeAt(a)))==55296&&a+1<c&&(64512&(d=p.charCodeAt(a+1)))==56320&&(i=65536+(i-55296<<10)+(d-56320),a++),_+=i<128?1:i<2048?2:i<65536?3:4;for(m=new o.Buf8(_),a=h=0;h<_;a++)(64512&(i=p.charCodeAt(a)))==55296&&a+1<c&&(64512&(d=p.charCodeAt(a+1)))==56320&&(i=65536+(i-55296<<10)+(d-56320),a++),i<128?m[h++]=i:(i<2048?m[h++]=192|i>>>6:(i<65536?m[h++]=224|i>>>12:(m[h++]=240|i>>>18,m[h++]=128|i>>>12&63),m[h++]=128|i>>>6&63),m[h++]=128|63&i);return m},u.buf2binstring=function(p){return y(p,p.length)},u.binstring2buf=function(p){for(var m=new o.Buf8(p.length),i=0,d=m.length;i<d;i++)m[i]=p.charCodeAt(i);return m},u.buf2string=function(p,m){var i,d,a,h,c=m||p.length,_=new Array(2*c);for(i=d=0;i<c;)if((a=p[i++])<128)_[d++]=a;else if(4<(h=l[a]))_[d++]=65533,i+=h-1;else{for(a&=h===2?31:h===3?15:7;1<h&&i<c;)a=a<<6|63&p[i++],h--;1<h?_[d++]=65533:a<65536?_[d++]=a:(a-=65536,_[d++]=55296|a>>10&1023,_[d++]=56320|1023&a)}return y(_,d)},u.utf8border=function(p,m){var i;for((m=m||p.length)>p.length&&(m=p.length),i=m-1;0<=i&&(192&p[i])==128;)i--;return i<0||i===0?m:i+l[p[i]]>m?i:m}},{"./common":41}],43:[function(r,w,u){w.exports=function(o,s,n,l){for(var v=65535&o|0,y=o>>>16&65535|0,p=0;n!==0;){for(n-=p=2e3<n?2e3:n;y=y+(v=v+s[l++]|0)|0,--p;);v%=65521,y%=65521}return v|y<<16|0}},{}],44:[function(r,w,u){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,w,u){var o=function(){for(var s,n=[],l=0;l<256;l++){s=l;for(var v=0;v<8;v++)s=1&s?3988292384^s>>>1:s>>>1;n[l]=s}return n}();w.exports=function(s,n,l,v){var y=o,p=v+l;s^=-1;for(var m=v;m<p;m++)s=s>>>8^y[255&(s^n[m])];return-1^s}},{}],46:[function(r,w,u){var o,s=r("../utils/common"),n=r("./trees"),l=r("./adler32"),v=r("./crc32"),y=r("./messages"),p=0,m=4,i=0,d=-2,a=-1,h=4,c=2,_=8,x=9,A=286,C=30,U=19,T=2*A+1,j=15,F=3,H=258,Q=H+F+1,k=42,R=113,e=1,L=2,et=3,M=4;function rt(t,O){return t.msg=y[O],O}function $(t){return(t<<1)-(4<t?9:0)}function tt(t){for(var O=t.length;0<=--O;)t[O]=0}function B(t){var O=t.state,P=O.pending;P>t.avail_out&&(P=t.avail_out),P!==0&&(s.arraySet(t.output,O.pending_buf,O.pending_out,P,t.next_out),t.next_out+=P,O.pending_out+=P,t.total_out+=P,t.avail_out-=P,O.pending-=P,O.pending===0&&(O.pending_out=0))}function z(t,O){n._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,O),t.block_start=t.strstart,B(t.strm)}function J(t,O){t.pending_buf[t.pending++]=O}function K(t,O){t.pending_buf[t.pending++]=O>>>8&255,t.pending_buf[t.pending++]=255&O}function V(t,O){var P,g,f=t.max_chain_length,E=t.strstart,D=t.prev_length,N=t.nice_match,I=t.strstart>t.w_size-Q?t.strstart-(t.w_size-Q):0,Z=t.window,X=t.w_mask,q=t.prev,Y=t.strstart+H,at=Z[E+D-1],it=Z[E+D];t.prev_length>=t.good_match&&(f>>=2),N>t.lookahead&&(N=t.lookahead);do if(Z[(P=O)+D]===it&&Z[P+D-1]===at&&Z[P]===Z[E]&&Z[++P]===Z[E+1]){E+=2,P++;do;while(Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&Z[++E]===Z[++P]&&E<Y);if(g=H-(Y-E),E=Y-H,D<g){if(t.match_start=O,N<=(D=g))break;at=Z[E+D-1],it=Z[E+D]}}while((O=q[O&X])>I&&--f!=0);return D<=t.lookahead?D:t.lookahead}function ot(t){var O,P,g,f,E,D,N,I,Z,X,q=t.w_size;do{if(f=t.window_size-t.lookahead-t.strstart,t.strstart>=q+(q-Q)){for(s.arraySet(t.window,t.window,q,q,0),t.match_start-=q,t.strstart-=q,t.block_start-=q,O=P=t.hash_size;g=t.head[--O],t.head[O]=q<=g?g-q:0,--P;);for(O=P=q;g=t.prev[--O],t.prev[O]=q<=g?g-q:0,--P;);f+=q}if(t.strm.avail_in===0)break;if(D=t.strm,N=t.window,I=t.strstart+t.lookahead,Z=f,X=void 0,X=D.avail_in,Z<X&&(X=Z),P=X===0?0:(D.avail_in-=X,s.arraySet(N,D.input,D.next_in,X,I),D.state.wrap===1?D.adler=l(D.adler,N,X,I):D.state.wrap===2&&(D.adler=v(D.adler,N,X,I)),D.next_in+=X,D.total_in+=X,X),t.lookahead+=P,t.lookahead+t.insert>=F)for(E=t.strstart-t.insert,t.ins_h=t.window[E],t.ins_h=(t.ins_h<<t.hash_shift^t.window[E+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[E+F-1])&t.hash_mask,t.prev[E&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=E,E++,t.insert--,!(t.lookahead+t.insert<F)););}while(t.lookahead<Q&&t.strm.avail_in!==0)}function dt(t,O){for(var P,g;;){if(t.lookahead<Q){if(ot(t),t.lookahead<Q&&O===p)return e;if(t.lookahead===0)break}if(P=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),P!==0&&t.strstart-P<=t.w_size-Q&&(t.match_length=V(t,P)),t.match_length>=F)if(g=n._tr_tally(t,t.strstart-t.match_start,t.match_length-F),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=F){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else g=n._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(g&&(z(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<F-1?t.strstart:F-1,O===m?(z(t,!0),t.strm.avail_out===0?et:M):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?e:L}function nt(t,O){for(var P,g,f;;){if(t.lookahead<Q){if(ot(t),t.lookahead<Q&&O===p)return e;if(t.lookahead===0)break}if(P=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=F-1,P!==0&&t.prev_length<t.max_lazy_match&&t.strstart-P<=t.w_size-Q&&(t.match_length=V(t,P),t.match_length<=5&&(t.strategy===1||t.match_length===F&&4096<t.strstart-t.match_start)&&(t.match_length=F-1)),t.prev_length>=F&&t.match_length<=t.prev_length){for(f=t.strstart+t.lookahead-F,g=n._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-F),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=f&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,P=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=F-1,t.strstart++,g&&(z(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((g=n._tr_tally(t,0,t.window[t.strstart-1]))&&z(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(g=n._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<F-1?t.strstart:F-1,O===m?(z(t,!0),t.strm.avail_out===0?et:M):t.last_lit&&(z(t,!1),t.strm.avail_out===0)?e:L}function st(t,O,P,g,f){this.good_length=t,this.max_lazy=O,this.nice_length=P,this.max_chain=g,this.func=f}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*T),this.dyn_dtree=new s.Buf16(2*(2*C+1)),this.bl_tree=new s.Buf16(2*(2*U+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(j+1),this.heap=new s.Buf16(2*A+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*A+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(t){var O;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=c,(O=t.state).pending=0,O.pending_out=0,O.wrap<0&&(O.wrap=-O.wrap),O.status=O.wrap?k:R,t.adler=O.wrap===2?0:1,O.last_flush=p,n._tr_init(O),i):rt(t,d)}function mt(t){var O=lt(t);return O===i&&function(P){P.window_size=2*P.w_size,tt(P.head),P.max_lazy_match=o[P.level].max_lazy,P.good_match=o[P.level].good_length,P.nice_match=o[P.level].nice_length,P.max_chain_length=o[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=F-1,P.match_available=0,P.ins_h=0}(t.state),O}function ht(t,O,P,g,f,E){if(!t)return d;var D=1;if(O===a&&(O=6),g<0?(D=0,g=-g):15<g&&(D=2,g-=16),f<1||x<f||P!==_||g<8||15<g||O<0||9<O||E<0||h<E)return rt(t,d);g===8&&(g=9);var N=new ct;return(t.state=N).strm=t,N.wrap=D,N.gzhead=null,N.w_bits=g,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=f+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+F-1)/F),N.window=new s.Buf8(2*N.w_size),N.head=new s.Buf16(N.hash_size),N.prev=new s.Buf16(N.w_size),N.lit_bufsize=1<<f+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new s.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=O,N.strategy=E,N.method=P,mt(t)}o=[new st(0,0,0,0,function(t,O){var P=65535;for(P>t.pending_buf_size-5&&(P=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ot(t),t.lookahead===0&&O===p)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var g=t.block_start+P;if((t.strstart===0||t.strstart>=g)&&(t.lookahead=t.strstart-g,t.strstart=g,z(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-Q&&(z(t,!1),t.strm.avail_out===0))return e}return t.insert=0,O===m?(z(t,!0),t.strm.avail_out===0?et:M):(t.strstart>t.block_start&&(z(t,!1),t.strm.avail_out),e)}),new st(4,4,8,4,dt),new st(4,5,16,8,dt),new st(4,6,32,32,dt),new st(4,4,16,16,nt),new st(8,16,32,32,nt),new st(8,16,128,128,nt),new st(8,32,128,256,nt),new st(32,128,258,1024,nt),new st(32,258,258,4096,nt)],u.deflateInit=function(t,O){return ht(t,O,_,15,8,0)},u.deflateInit2=ht,u.deflateReset=mt,u.deflateResetKeep=lt,u.deflateSetHeader=function(t,O){return t&&t.state?t.state.wrap!==2?d:(t.state.gzhead=O,i):d},u.deflate=function(t,O){var P,g,f,E;if(!t||!t.state||5<O||O<0)return t?rt(t,d):d;if(g=t.state,!t.output||!t.input&&t.avail_in!==0||g.status===666&&O!==m)return rt(t,t.avail_out===0?-5:d);if(g.strm=t,P=g.last_flush,g.last_flush=O,g.status===k)if(g.wrap===2)t.adler=0,J(g,31),J(g,139),J(g,8),g.gzhead?(J(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),J(g,255&g.gzhead.time),J(g,g.gzhead.time>>8&255),J(g,g.gzhead.time>>16&255),J(g,g.gzhead.time>>24&255),J(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),J(g,255&g.gzhead.os),g.gzhead.extra&&g.gzhead.extra.length&&(J(g,255&g.gzhead.extra.length),J(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(t.adler=v(t.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(J(g,0),J(g,0),J(g,0),J(g,0),J(g,0),J(g,g.level===9?2:2<=g.strategy||g.level<2?4:0),J(g,3),g.status=R);else{var D=_+(g.w_bits-8<<4)<<8;D|=(2<=g.strategy||g.level<2?0:g.level<6?1:g.level===6?2:3)<<6,g.strstart!==0&&(D|=32),D+=31-D%31,g.status=R,K(g,D),g.strstart!==0&&(K(g,t.adler>>>16),K(g,65535&t.adler)),t.adler=1}if(g.status===69)if(g.gzhead.extra){for(f=g.pending;g.gzindex<(65535&g.gzhead.extra.length)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),B(t),f=g.pending,g.pending!==g.pending_buf_size));)J(g,255&g.gzhead.extra[g.gzindex]),g.gzindex++;g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=73;if(g.status===73)if(g.gzhead.name){f=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),B(t),f=g.pending,g.pending===g.pending_buf_size)){E=1;break}E=g.gzindex<g.gzhead.name.length?255&g.gzhead.name.charCodeAt(g.gzindex++):0,J(g,E)}while(E!==0);g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),E===0&&(g.gzindex=0,g.status=91)}else g.status=91;if(g.status===91)if(g.gzhead.comment){f=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),B(t),f=g.pending,g.pending===g.pending_buf_size)){E=1;break}E=g.gzindex<g.gzhead.comment.length?255&g.gzhead.comment.charCodeAt(g.gzindex++):0,J(g,E)}while(E!==0);g.gzhead.hcrc&&g.pending>f&&(t.adler=v(t.adler,g.pending_buf,g.pending-f,f)),E===0&&(g.status=103)}else g.status=103;if(g.status===103&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&B(t),g.pending+2<=g.pending_buf_size&&(J(g,255&t.adler),J(g,t.adler>>8&255),t.adler=0,g.status=R)):g.status=R),g.pending!==0){if(B(t),t.avail_out===0)return g.last_flush=-1,i}else if(t.avail_in===0&&$(O)<=$(P)&&O!==m)return rt(t,-5);if(g.status===666&&t.avail_in!==0)return rt(t,-5);if(t.avail_in!==0||g.lookahead!==0||O!==p&&g.status!==666){var N=g.strategy===2?function(I,Z){for(var X;;){if(I.lookahead===0&&(ot(I),I.lookahead===0)){if(Z===p)return e;break}if(I.match_length=0,X=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,X&&(z(I,!1),I.strm.avail_out===0))return e}return I.insert=0,Z===m?(z(I,!0),I.strm.avail_out===0?et:M):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?e:L}(g,O):g.strategy===3?function(I,Z){for(var X,q,Y,at,it=I.window;;){if(I.lookahead<=H){if(ot(I),I.lookahead<=H&&Z===p)return e;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=F&&0<I.strstart&&(q=it[Y=I.strstart-1])===it[++Y]&&q===it[++Y]&&q===it[++Y]){at=I.strstart+H;do;while(q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&q===it[++Y]&&Y<at);I.match_length=H-(at-Y),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=F?(X=n._tr_tally(I,1,I.match_length-F),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(X=n._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),X&&(z(I,!1),I.strm.avail_out===0))return e}return I.insert=0,Z===m?(z(I,!0),I.strm.avail_out===0?et:M):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?e:L}(g,O):o[g.level].func(g,O);if(N!==et&&N!==M||(g.status=666),N===e||N===et)return t.avail_out===0&&(g.last_flush=-1),i;if(N===L&&(O===1?n._tr_align(g):O!==5&&(n._tr_stored_block(g,0,0,!1),O===3&&(tt(g.head),g.lookahead===0&&(g.strstart=0,g.block_start=0,g.insert=0))),B(t),t.avail_out===0))return g.last_flush=-1,i}return O!==m?i:g.wrap<=0?1:(g.wrap===2?(J(g,255&t.adler),J(g,t.adler>>8&255),J(g,t.adler>>16&255),J(g,t.adler>>24&255),J(g,255&t.total_in),J(g,t.total_in>>8&255),J(g,t.total_in>>16&255),J(g,t.total_in>>24&255)):(K(g,t.adler>>>16),K(g,65535&t.adler)),B(t),0<g.wrap&&(g.wrap=-g.wrap),g.pending!==0?i:1)},u.deflateEnd=function(t){var O;return t&&t.state?(O=t.state.status)!==k&&O!==69&&O!==73&&O!==91&&O!==103&&O!==R&&O!==666?rt(t,d):(t.state=null,O===R?rt(t,-3):i):d},u.deflateSetDictionary=function(t,O){var P,g,f,E,D,N,I,Z,X=O.length;if(!t||!t.state||(E=(P=t.state).wrap)===2||E===1&&P.status!==k||P.lookahead)return d;for(E===1&&(t.adler=l(t.adler,O,X,0)),P.wrap=0,X>=P.w_size&&(E===0&&(tt(P.head),P.strstart=0,P.block_start=0,P.insert=0),Z=new s.Buf8(P.w_size),s.arraySet(Z,O,X-P.w_size,P.w_size,0),O=Z,X=P.w_size),D=t.avail_in,N=t.next_in,I=t.input,t.avail_in=X,t.next_in=0,t.input=O,ot(P);P.lookahead>=F;){for(g=P.strstart,f=P.lookahead-(F-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[g+F-1])&P.hash_mask,P.prev[g&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=g,g++,--f;);P.strstart=g,P.lookahead=F-1,ot(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=F-1,P.match_available=0,t.next_in=N,t.input=I,t.avail_in=D,P.wrap=E,i},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,w,u){w.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,w,u){w.exports=function(o,s){var n,l,v,y,p,m,i,d,a,h,c,_,x,A,C,U,T,j,F,H,Q,k,R,e,L;n=o.state,l=o.next_in,e=o.input,v=l+(o.avail_in-5),y=o.next_out,L=o.output,p=y-(s-o.avail_out),m=y+(o.avail_out-257),i=n.dmax,d=n.wsize,a=n.whave,h=n.wnext,c=n.window,_=n.hold,x=n.bits,A=n.lencode,C=n.distcode,U=(1<<n.lenbits)-1,T=(1<<n.distbits)-1;t:do{x<15&&(_+=e[l++]<<x,x+=8,_+=e[l++]<<x,x+=8),j=A[_&U];e:for(;;){if(_>>>=F=j>>>24,x-=F,(F=j>>>16&255)===0)L[y++]=65535&j;else{if(!(16&F)){if(!(64&F)){j=A[(65535&j)+(_&(1<<F)-1)];continue e}if(32&F){n.mode=12;break t}o.msg="invalid literal/length code",n.mode=30;break t}H=65535&j,(F&=15)&&(x<F&&(_+=e[l++]<<x,x+=8),H+=_&(1<<F)-1,_>>>=F,x-=F),x<15&&(_+=e[l++]<<x,x+=8,_+=e[l++]<<x,x+=8),j=C[_&T];r:for(;;){if(_>>>=F=j>>>24,x-=F,!(16&(F=j>>>16&255))){if(!(64&F)){j=C[(65535&j)+(_&(1<<F)-1)];continue r}o.msg="invalid distance code",n.mode=30;break t}if(Q=65535&j,x<(F&=15)&&(_+=e[l++]<<x,(x+=8)<F&&(_+=e[l++]<<x,x+=8)),i<(Q+=_&(1<<F)-1)){o.msg="invalid distance too far back",n.mode=30;break t}if(_>>>=F,x-=F,(F=y-p)<Q){if(a<(F=Q-F)&&n.sane){o.msg="invalid distance too far back",n.mode=30;break t}if(R=c,(k=0)===h){if(k+=d-F,F<H){for(H-=F;L[y++]=c[k++],--F;);k=y-Q,R=L}}else if(h<F){if(k+=d+h-F,(F-=h)<H){for(H-=F;L[y++]=c[k++],--F;);if(k=0,h<H){for(H-=F=h;L[y++]=c[k++],--F;);k=y-Q,R=L}}}else if(k+=h-F,F<H){for(H-=F;L[y++]=c[k++],--F;);k=y-Q,R=L}for(;2<H;)L[y++]=R[k++],L[y++]=R[k++],L[y++]=R[k++],H-=3;H&&(L[y++]=R[k++],1<H&&(L[y++]=R[k++]))}else{for(k=y-Q;L[y++]=L[k++],L[y++]=L[k++],L[y++]=L[k++],2<(H-=3););H&&(L[y++]=L[k++],1<H&&(L[y++]=L[k++]))}break}}break}}while(l<v&&y<m);l-=H=x>>3,_&=(1<<(x-=H<<3))-1,o.next_in=l,o.next_out=y,o.avail_in=l<v?v-l+5:5-(l-v),o.avail_out=y<m?m-y+257:257-(y-m),n.hold=_,n.bits=x}},{}],49:[function(r,w,u){var o=r("../utils/common"),s=r("./adler32"),n=r("./crc32"),l=r("./inffast"),v=r("./inftrees"),y=1,p=2,m=0,i=-2,d=1,a=852,h=592;function c(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(k){var R;return k&&k.state?(R=k.state,k.total_in=k.total_out=R.total=0,k.msg="",R.wrap&&(k.adler=1&R.wrap),R.mode=d,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new o.Buf32(a),R.distcode=R.distdyn=new o.Buf32(h),R.sane=1,R.back=-1,m):i}function A(k){var R;return k&&k.state?((R=k.state).wsize=0,R.whave=0,R.wnext=0,x(k)):i}function C(k,R){var e,L;return k&&k.state?(L=k.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?i:(L.window!==null&&L.wbits!==R&&(L.window=null),L.wrap=e,L.wbits=R,A(k))):i}function U(k,R){var e,L;return k?(L=new _,(k.state=L).window=null,(e=C(k,R))!==m&&(k.state=null),e):i}var T,j,F=!0;function H(k){if(F){var R;for(T=new o.Buf32(512),j=new o.Buf32(32),R=0;R<144;)k.lens[R++]=8;for(;R<256;)k.lens[R++]=9;for(;R<280;)k.lens[R++]=7;for(;R<288;)k.lens[R++]=8;for(v(y,k.lens,0,288,T,0,k.work,{bits:9}),R=0;R<32;)k.lens[R++]=5;v(p,k.lens,0,32,j,0,k.work,{bits:5}),F=!1}k.lencode=T,k.lenbits=9,k.distcode=j,k.distbits=5}function Q(k,R,e,L){var et,M=k.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new o.Buf8(M.wsize)),L>=M.wsize?(o.arraySet(M.window,R,e-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(L<(et=M.wsize-M.wnext)&&(et=L),o.arraySet(M.window,R,e-L,et,M.wnext),(L-=et)?(o.arraySet(M.window,R,e-L,L,0),M.wnext=L,M.whave=M.wsize):(M.wnext+=et,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=et))),0}u.inflateReset=A,u.inflateReset2=C,u.inflateResetKeep=x,u.inflateInit=function(k){return U(k,15)},u.inflateInit2=U,u.inflate=function(k,R){var e,L,et,M,rt,$,tt,B,z,J,K,V,ot,dt,nt,st,ct,lt,mt,ht,t,O,P,g,f=0,E=new o.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return i;(e=k.state).mode===12&&(e.mode=13),rt=k.next_out,et=k.output,tt=k.avail_out,M=k.next_in,L=k.input,$=k.avail_in,B=e.hold,z=e.bits,J=$,K=tt,O=m;t:for(;;)switch(e.mode){case d:if(e.wrap===0){e.mode=13;break}for(;z<16;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(2&e.wrap&&B===35615){E[e.check=0]=255&B,E[1]=B>>>8&255,e.check=n(e.check,E,2,0),z=B=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&B)<<8)+(B>>8))%31){k.msg="incorrect header check",e.mode=30;break}if((15&B)!=8){k.msg="unknown compression method",e.mode=30;break}if(z-=4,t=8+(15&(B>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){k.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,k.adler=e.check=1,e.mode=512&B?10:12,z=B=0;break;case 2:for(;z<16;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(e.flags=B,(255&e.flags)!=8){k.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){k.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=B>>8&1),512&e.flags&&(E[0]=255&B,E[1]=B>>>8&255,e.check=n(e.check,E,2,0)),z=B=0,e.mode=3;case 3:for(;z<32;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.head&&(e.head.time=B),512&e.flags&&(E[0]=255&B,E[1]=B>>>8&255,E[2]=B>>>16&255,E[3]=B>>>24&255,e.check=n(e.check,E,4,0)),z=B=0,e.mode=4;case 4:for(;z<16;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.head&&(e.head.xflags=255&B,e.head.os=B>>8),512&e.flags&&(E[0]=255&B,E[1]=B>>>8&255,e.check=n(e.check,E,2,0)),z=B=0,e.mode=5;case 5:if(1024&e.flags){for(;z<16;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.length=B,e.head&&(e.head.extra_len=B),512&e.flags&&(E[0]=255&B,E[1]=B>>>8&255,e.check=n(e.check,E,2,0)),z=B=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&($<(V=e.length)&&(V=$),V&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),o.arraySet(e.head.extra,L,M,V,t)),512&e.flags&&(e.check=n(e.check,L,V,M)),$-=V,M+=V,e.length-=V),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if($===0)break t;for(V=0;t=L[M+V++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&V<$;);if(512&e.flags&&(e.check=n(e.check,L,V,M)),$-=V,M+=V,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if($===0)break t;for(V=0;t=L[M+V++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&V<$;);if(512&e.flags&&(e.check=n(e.check,L,V,M)),$-=V,M+=V,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;z<16;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(B!==(65535&e.check)){k.msg="header crc mismatch",e.mode=30;break}z=B=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),k.adler=e.check=0,e.mode=12;break;case 10:for(;z<32;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}k.adler=e.check=c(B),z=B=0,e.mode=11;case 11:if(e.havedict===0)return k.next_out=rt,k.avail_out=tt,k.next_in=M,k.avail_in=$,e.hold=B,e.bits=z,2;k.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){B>>>=7&z,z-=7&z,e.mode=27;break}for(;z<3;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}switch(e.last=1&B,z-=1,3&(B>>>=1)){case 0:e.mode=14;break;case 1:if(H(e),e.mode=20,R!==6)break;B>>>=2,z-=2;break t;case 2:e.mode=17;break;case 3:k.msg="invalid block type",e.mode=30}B>>>=2,z-=2;break;case 14:for(B>>>=7&z,z-=7&z;z<32;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if((65535&B)!=(B>>>16^65535)){k.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&B,z=B=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(V=e.length){if($<V&&(V=$),tt<V&&(V=tt),V===0)break t;o.arraySet(et,L,M,V,rt),$-=V,M+=V,tt-=V,rt+=V,e.length-=V;break}e.mode=12;break;case 17:for(;z<14;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(e.nlen=257+(31&B),B>>>=5,z-=5,e.ndist=1+(31&B),B>>>=5,z-=5,e.ncode=4+(15&B),B>>>=4,z-=4,286<e.nlen||30<e.ndist){k.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;z<3;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.lens[D[e.have++]]=7&B,B>>>=3,z-=3}for(;e.have<19;)e.lens[D[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,P={bits:e.lenbits},O=v(0,e.lens,0,19,e.lencode,0,e.work,P),e.lenbits=P.bits,O){k.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;st=(f=e.lencode[B&(1<<e.lenbits)-1])>>>16&255,ct=65535&f,!((nt=f>>>24)<=z);){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(ct<16)B>>>=nt,z-=nt,e.lens[e.have++]=ct;else{if(ct===16){for(g=nt+2;z<g;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(B>>>=nt,z-=nt,e.have===0){k.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],V=3+(3&B),B>>>=2,z-=2}else if(ct===17){for(g=nt+3;z<g;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}z-=nt,t=0,V=3+(7&(B>>>=nt)),B>>>=3,z-=3}else{for(g=nt+7;z<g;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}z-=nt,t=0,V=11+(127&(B>>>=nt)),B>>>=7,z-=7}if(e.have+V>e.nlen+e.ndist){k.msg="invalid bit length repeat",e.mode=30;break}for(;V--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){k.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,P={bits:e.lenbits},O=v(y,e.lens,0,e.nlen,e.lencode,0,e.work,P),e.lenbits=P.bits,O){k.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,P={bits:e.distbits},O=v(p,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,P),e.distbits=P.bits,O){k.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=$&&258<=tt){k.next_out=rt,k.avail_out=tt,k.next_in=M,k.avail_in=$,e.hold=B,e.bits=z,l(k,K),rt=k.next_out,et=k.output,tt=k.avail_out,M=k.next_in,L=k.input,$=k.avail_in,B=e.hold,z=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;st=(f=e.lencode[B&(1<<e.lenbits)-1])>>>16&255,ct=65535&f,!((nt=f>>>24)<=z);){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(st&&!(240&st)){for(lt=nt,mt=st,ht=ct;st=(f=e.lencode[ht+((B&(1<<lt+mt)-1)>>lt)])>>>16&255,ct=65535&f,!(lt+(nt=f>>>24)<=z);){if($===0)break t;$--,B+=L[M++]<<z,z+=8}B>>>=lt,z-=lt,e.back+=lt}if(B>>>=nt,z-=nt,e.back+=nt,e.length=ct,st===0){e.mode=26;break}if(32&st){e.back=-1,e.mode=12;break}if(64&st){k.msg="invalid literal/length code",e.mode=30;break}e.extra=15&st,e.mode=22;case 22:if(e.extra){for(g=e.extra;z<g;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.length+=B&(1<<e.extra)-1,B>>>=e.extra,z-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;st=(f=e.distcode[B&(1<<e.distbits)-1])>>>16&255,ct=65535&f,!((nt=f>>>24)<=z);){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(!(240&st)){for(lt=nt,mt=st,ht=ct;st=(f=e.distcode[ht+((B&(1<<lt+mt)-1)>>lt)])>>>16&255,ct=65535&f,!(lt+(nt=f>>>24)<=z);){if($===0)break t;$--,B+=L[M++]<<z,z+=8}B>>>=lt,z-=lt,e.back+=lt}if(B>>>=nt,z-=nt,e.back+=nt,64&st){k.msg="invalid distance code",e.mode=30;break}e.offset=ct,e.extra=15&st,e.mode=24;case 24:if(e.extra){for(g=e.extra;z<g;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}e.offset+=B&(1<<e.extra)-1,B>>>=e.extra,z-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){k.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(tt===0)break t;if(V=K-tt,e.offset>V){if((V=e.offset-V)>e.whave&&e.sane){k.msg="invalid distance too far back",e.mode=30;break}ot=V>e.wnext?(V-=e.wnext,e.wsize-V):e.wnext-V,V>e.length&&(V=e.length),dt=e.window}else dt=et,ot=rt-e.offset,V=e.length;for(tt<V&&(V=tt),tt-=V,e.length-=V;et[rt++]=dt[ot++],--V;);e.length===0&&(e.mode=21);break;case 26:if(tt===0)break t;et[rt++]=e.length,tt--,e.mode=21;break;case 27:if(e.wrap){for(;z<32;){if($===0)break t;$--,B|=L[M++]<<z,z+=8}if(K-=tt,k.total_out+=K,e.total+=K,K&&(k.adler=e.check=e.flags?n(e.check,et,K,rt-K):s(e.check,et,K,rt-K)),K=tt,(e.flags?B:c(B))!==e.check){k.msg="incorrect data check",e.mode=30;break}z=B=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;z<32;){if($===0)break t;$--,B+=L[M++]<<z,z+=8}if(B!==(4294967295&e.total)){k.msg="incorrect length check",e.mode=30;break}z=B=0}e.mode=29;case 29:O=1;break t;case 30:O=-3;break t;case 31:return-4;case 32:default:return i}return k.next_out=rt,k.avail_out=tt,k.next_in=M,k.avail_in=$,e.hold=B,e.bits=z,(e.wsize||K!==k.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&Q(k,k.output,k.next_out,K-k.avail_out)?(e.mode=31,-4):(J-=k.avail_in,K-=k.avail_out,k.total_in+=J,k.total_out+=K,e.total+=K,e.wrap&&K&&(k.adler=e.check=e.flags?n(e.check,et,K,k.next_out-K):s(e.check,et,K,k.next_out-K)),k.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(J==0&&K===0||R===4)&&O===m&&(O=-5),O)},u.inflateEnd=function(k){if(!k||!k.state)return i;var R=k.state;return R.window&&(R.window=null),k.state=null,m},u.inflateGetHeader=function(k,R){var e;return k&&k.state&&2&(e=k.state).wrap?((e.head=R).done=!1,m):i},u.inflateSetDictionary=function(k,R){var e,L=R.length;return k&&k.state?(e=k.state).wrap!==0&&e.mode!==11?i:e.mode===11&&s(1,R,L,0)!==e.check?-3:Q(k,R,L,L)?(e.mode=31,-4):(e.havedict=1,m):i},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,w,u){var o=r("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(y,p,m,i,d,a,h,c){var _,x,A,C,U,T,j,F,H,Q=c.bits,k=0,R=0,e=0,L=0,et=0,M=0,rt=0,$=0,tt=0,B=0,z=null,J=0,K=new o.Buf16(16),V=new o.Buf16(16),ot=null,dt=0;for(k=0;k<=15;k++)K[k]=0;for(R=0;R<i;R++)K[p[m+R]]++;for(et=Q,L=15;1<=L&&K[L]===0;L--);if(L<et&&(et=L),L===0)return d[a++]=20971520,d[a++]=20971520,c.bits=1,0;for(e=1;e<L&&K[e]===0;e++);for(et<e&&(et=e),k=$=1;k<=15;k++)if($<<=1,($-=K[k])<0)return-1;if(0<$&&(y===0||L!==1))return-1;for(V[1]=0,k=1;k<15;k++)V[k+1]=V[k]+K[k];for(R=0;R<i;R++)p[m+R]!==0&&(h[V[p[m+R]]++]=R);if(T=y===0?(z=ot=h,19):y===1?(z=s,J-=257,ot=n,dt-=257,256):(z=l,ot=v,-1),k=e,U=a,rt=R=B=0,A=-1,C=(tt=1<<(M=et))-1,y===1&&852<tt||y===2&&592<tt)return 1;for(;;){for(j=k-rt,H=h[R]<T?(F=0,h[R]):h[R]>T?(F=ot[dt+h[R]],z[J+h[R]]):(F=96,0),_=1<<k-rt,e=x=1<<M;d[U+(B>>rt)+(x-=_)]=j<<24|F<<16|H|0,x!==0;);for(_=1<<k-1;B&_;)_>>=1;if(_!==0?(B&=_-1,B+=_):B=0,R++,--K[k]==0){if(k===L)break;k=p[m+h[R]]}if(et<k&&(B&C)!==A){for(rt===0&&(rt=et),U+=e,$=1<<(M=k-rt);M+rt<L&&!(($-=K[M+rt])<=0);)M++,$<<=1;if(tt+=1<<M,y===1&&852<tt||y===2&&592<tt)return 1;d[A=B&C]=et<<24|M<<16|U-a|0}}return B!==0&&(d[U+B]=k-rt<<24|64<<16|0),c.bits=et,0}},{"../utils/common":41}],51:[function(r,w,u){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,w,u){var o=r("../utils/common"),s=0,n=1;function l(f){for(var E=f.length;0<=--E;)f[E]=0}var v=0,y=29,p=256,m=p+1+y,i=30,d=19,a=2*m+1,h=15,c=16,_=7,x=256,A=16,C=17,U=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(m+2));l(Q);var k=new Array(2*i);l(k);var R=new Array(512);l(R);var e=new Array(256);l(e);var L=new Array(y);l(L);var et,M,rt,$=new Array(i);function tt(f,E,D,N,I){this.static_tree=f,this.extra_bits=E,this.extra_base=D,this.elems=N,this.max_length=I,this.has_stree=f&&f.length}function B(f,E){this.dyn_tree=f,this.max_code=0,this.stat_desc=E}function z(f){return f<256?R[f]:R[256+(f>>>7)]}function J(f,E){f.pending_buf[f.pending++]=255&E,f.pending_buf[f.pending++]=E>>>8&255}function K(f,E,D){f.bi_valid>c-D?(f.bi_buf|=E<<f.bi_valid&65535,J(f,f.bi_buf),f.bi_buf=E>>c-f.bi_valid,f.bi_valid+=D-c):(f.bi_buf|=E<<f.bi_valid&65535,f.bi_valid+=D)}function V(f,E,D){K(f,D[2*E],D[2*E+1])}function ot(f,E){for(var D=0;D|=1&f,f>>>=1,D<<=1,0<--E;);return D>>>1}function dt(f,E,D){var N,I,Z=new Array(h+1),X=0;for(N=1;N<=h;N++)Z[N]=X=X+D[N-1]<<1;for(I=0;I<=E;I++){var q=f[2*I+1];q!==0&&(f[2*I]=ot(Z[q]++,q))}}function nt(f){var E;for(E=0;E<m;E++)f.dyn_ltree[2*E]=0;for(E=0;E<i;E++)f.dyn_dtree[2*E]=0;for(E=0;E<d;E++)f.bl_tree[2*E]=0;f.dyn_ltree[2*x]=1,f.opt_len=f.static_len=0,f.last_lit=f.matches=0}function st(f){8<f.bi_valid?J(f,f.bi_buf):0<f.bi_valid&&(f.pending_buf[f.pending++]=f.bi_buf),f.bi_buf=0,f.bi_valid=0}function ct(f,E,D,N){var I=2*E,Z=2*D;return f[I]<f[Z]||f[I]===f[Z]&&N[E]<=N[D]}function lt(f,E,D){for(var N=f.heap[D],I=D<<1;I<=f.heap_len&&(I<f.heap_len&&ct(E,f.heap[I+1],f.heap[I],f.depth)&&I++,!ct(E,N,f.heap[I],f.depth));)f.heap[D]=f.heap[I],D=I,I<<=1;f.heap[D]=N}function mt(f,E,D){var N,I,Z,X,q=0;if(f.last_lit!==0)for(;N=f.pending_buf[f.d_buf+2*q]<<8|f.pending_buf[f.d_buf+2*q+1],I=f.pending_buf[f.l_buf+q],q++,N===0?V(f,I,E):(V(f,(Z=e[I])+p+1,E),(X=T[Z])!==0&&K(f,I-=L[Z],X),V(f,Z=z(--N),D),(X=j[Z])!==0&&K(f,N-=$[Z],X)),q<f.last_lit;);V(f,x,E)}function ht(f,E){var D,N,I,Z=E.dyn_tree,X=E.stat_desc.static_tree,q=E.stat_desc.has_stree,Y=E.stat_desc.elems,at=-1;for(f.heap_len=0,f.heap_max=a,D=0;D<Y;D++)Z[2*D]!==0?(f.heap[++f.heap_len]=at=D,f.depth[D]=0):Z[2*D+1]=0;for(;f.heap_len<2;)Z[2*(I=f.heap[++f.heap_len]=at<2?++at:0)]=1,f.depth[I]=0,f.opt_len--,q&&(f.static_len-=X[2*I+1]);for(E.max_code=at,D=f.heap_len>>1;1<=D;D--)lt(f,Z,D);for(I=Y;D=f.heap[1],f.heap[1]=f.heap[f.heap_len--],lt(f,Z,1),N=f.heap[1],f.heap[--f.heap_max]=D,f.heap[--f.heap_max]=N,Z[2*I]=Z[2*D]+Z[2*N],f.depth[I]=(f.depth[D]>=f.depth[N]?f.depth[D]:f.depth[N])+1,Z[2*D+1]=Z[2*N+1]=I,f.heap[1]=I++,lt(f,Z,1),2<=f.heap_len;);f.heap[--f.heap_max]=f.heap[1],function(it,ft){var wt,gt,vt,ut,Ct,Tt,_t=ft.dyn_tree,jt=ft.max_code,oe=ft.stat_desc.static_tree,le=ft.stat_desc.has_stree,ue=ft.stat_desc.extra_bits,$t=ft.stat_desc.extra_base,kt=ft.stat_desc.max_length,At=0;for(ut=0;ut<=h;ut++)it.bl_count[ut]=0;for(_t[2*it.heap[it.heap_max]+1]=0,wt=it.heap_max+1;wt<a;wt++)kt<(ut=_t[2*_t[2*(gt=it.heap[wt])+1]+1]+1)&&(ut=kt,At++),_t[2*gt+1]=ut,jt<gt||(it.bl_count[ut]++,Ct=0,$t<=gt&&(Ct=ue[gt-$t]),Tt=_t[2*gt],it.opt_len+=Tt*(ut+Ct),le&&(it.static_len+=Tt*(oe[2*gt+1]+Ct)));if(At!==0){do{for(ut=kt-1;it.bl_count[ut]===0;)ut--;it.bl_count[ut]--,it.bl_count[ut+1]+=2,it.bl_count[kt]--,At-=2}while(0<At);for(ut=kt;ut!==0;ut--)for(gt=it.bl_count[ut];gt!==0;)jt<(vt=it.heap[--wt])||(_t[2*vt+1]!==ut&&(it.opt_len+=(ut-_t[2*vt+1])*_t[2*vt],_t[2*vt+1]=ut),gt--)}}(f,E),dt(Z,at,f.bl_count)}function t(f,E,D){var N,I,Z=-1,X=E[1],q=0,Y=7,at=4;for(X===0&&(Y=138,at=3),E[2*(D+1)+1]=65535,N=0;N<=D;N++)I=X,X=E[2*(N+1)+1],++q<Y&&I===X||(q<at?f.bl_tree[2*I]+=q:I!==0?(I!==Z&&f.bl_tree[2*I]++,f.bl_tree[2*A]++):q<=10?f.bl_tree[2*C]++:f.bl_tree[2*U]++,Z=I,at=(q=0)===X?(Y=138,3):I===X?(Y=6,3):(Y=7,4))}function O(f,E,D){var N,I,Z=-1,X=E[1],q=0,Y=7,at=4;for(X===0&&(Y=138,at=3),N=0;N<=D;N++)if(I=X,X=E[2*(N+1)+1],!(++q<Y&&I===X)){if(q<at)for(;V(f,I,f.bl_tree),--q!=0;);else I!==0?(I!==Z&&(V(f,I,f.bl_tree),q--),V(f,A,f.bl_tree),K(f,q-3,2)):q<=10?(V(f,C,f.bl_tree),K(f,q-3,3)):(V(f,U,f.bl_tree),K(f,q-11,7));Z=I,at=(q=0)===X?(Y=138,3):I===X?(Y=6,3):(Y=7,4)}}l($);var P=!1;function g(f,E,D,N){K(f,(v<<1)+(N?1:0),3),function(I,Z,X,q){st(I),J(I,X),J(I,~X),o.arraySet(I.pending_buf,I.window,Z,X,I.pending),I.pending+=X}(f,E,D)}u._tr_init=function(f){P||(function(){var E,D,N,I,Z,X=new Array(h+1);for(I=N=0;I<y-1;I++)for(L[I]=N,E=0;E<1<<T[I];E++)e[N++]=I;for(e[N-1]=I,I=Z=0;I<16;I++)for($[I]=Z,E=0;E<1<<j[I];E++)R[Z++]=I;for(Z>>=7;I<i;I++)for($[I]=Z<<7,E=0;E<1<<j[I]-7;E++)R[256+Z++]=I;for(D=0;D<=h;D++)X[D]=0;for(E=0;E<=143;)Q[2*E+1]=8,E++,X[8]++;for(;E<=255;)Q[2*E+1]=9,E++,X[9]++;for(;E<=279;)Q[2*E+1]=7,E++,X[7]++;for(;E<=287;)Q[2*E+1]=8,E++,X[8]++;for(dt(Q,m+1,X),E=0;E<i;E++)k[2*E+1]=5,k[2*E]=ot(E,5);et=new tt(Q,T,p+1,m,h),M=new tt(k,j,0,i,h),rt=new tt(new Array(0),F,0,d,_)}(),P=!0),f.l_desc=new B(f.dyn_ltree,et),f.d_desc=new B(f.dyn_dtree,M),f.bl_desc=new B(f.bl_tree,rt),f.bi_buf=0,f.bi_valid=0,nt(f)},u._tr_stored_block=g,u._tr_flush_block=function(f,E,D,N){var I,Z,X=0;0<f.level?(f.strm.data_type===2&&(f.strm.data_type=function(q){var Y,at=4093624447;for(Y=0;Y<=31;Y++,at>>>=1)if(1&at&&q.dyn_ltree[2*Y]!==0)return s;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return n;for(Y=32;Y<p;Y++)if(q.dyn_ltree[2*Y]!==0)return n;return s}(f)),ht(f,f.l_desc),ht(f,f.d_desc),X=function(q){var Y;for(t(q,q.dyn_ltree,q.l_desc.max_code),t(q,q.dyn_dtree,q.d_desc.max_code),ht(q,q.bl_desc),Y=d-1;3<=Y&&q.bl_tree[2*H[Y]+1]===0;Y--);return q.opt_len+=3*(Y+1)+5+5+4,Y}(f),I=f.opt_len+3+7>>>3,(Z=f.static_len+3+7>>>3)<=I&&(I=Z)):I=Z=D+5,D+4<=I&&E!==-1?g(f,E,D,N):f.strategy===4||Z===I?(K(f,2+(N?1:0),3),mt(f,Q,k)):(K(f,4+(N?1:0),3),function(q,Y,at,it){var ft;for(K(q,Y-257,5),K(q,at-1,5),K(q,it-4,4),ft=0;ft<it;ft++)K(q,q.bl_tree[2*H[ft]+1],3);O(q,q.dyn_ltree,Y-1),O(q,q.dyn_dtree,at-1)}(f,f.l_desc.max_code+1,f.d_desc.max_code+1,X+1),mt(f,f.dyn_ltree,f.dyn_dtree)),nt(f),N&&st(f)},u._tr_tally=function(f,E,D){return f.pending_buf[f.d_buf+2*f.last_lit]=E>>>8&255,f.pending_buf[f.d_buf+2*f.last_lit+1]=255&E,f.pending_buf[f.l_buf+f.last_lit]=255&D,f.last_lit++,E===0?f.dyn_ltree[2*D]++:(f.matches++,E--,f.dyn_ltree[2*(e[D]+p+1)]++,f.dyn_dtree[2*z(E)]++),f.last_lit===f.lit_bufsize-1},u._tr_align=function(f){K(f,2,3),V(f,x,Q),function(E){E.bi_valid===16?(J(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(f)}},{"../utils/common":41}],53:[function(r,w,u){w.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,w,u){(function(o){(function(s,n){if(!s.setImmediate){var l,v,y,p,m=1,i={},d=!1,a=s.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(s);h=h&&h.setTimeout?h:s,l={}.toString.call(s.process)==="[object process]"?function(A){process.nextTick(function(){_(A)})}:function(){if(s.postMessage&&!s.importScripts){var A=!0,C=s.onmessage;return s.onmessage=function(){A=!1},s.postMessage("","*"),s.onmessage=C,A}}()?(p="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",x,!1):s.attachEvent("onmessage",x),function(A){s.postMessage(p+A,"*")}):s.MessageChannel?((y=new MessageChannel).port1.onmessage=function(A){_(A.data)},function(A){y.port2.postMessage(A)}):a&&"onreadystatechange"in a.createElement("script")?(v=a.documentElement,function(A){var C=a.createElement("script");C.onreadystatechange=function(){_(A),C.onreadystatechange=null,v.removeChild(C),C=null},v.appendChild(C)}):function(A){setTimeout(_,0,A)},h.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var C=new Array(arguments.length-1),U=0;U<C.length;U++)C[U]=arguments[U+1];var T={callback:A,args:C};return i[m]=T,l(m),m++},h.clearImmediate=c}function c(A){delete i[A]}function _(A){if(d)setTimeout(_,0,A);else{var C=i[A];if(C){d=!0;try{(function(U){var T=U.callback,j=U.args;switch(j.length){case 0:T();break;case 1:T(j[0]);break;case 2:T(j[0],j[1]);break;case 3:T(j[0],j[1],j[2]);break;default:T.apply(n,j)}})(C)}finally{c(A),d=!1}}}}function x(A){A.source===s&&typeof A.data=="string"&&A.data.indexOf(p)===0&&_(+A.data.slice(p.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof It<"u"?It:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Kt);var Ae=Kt.exports;const Xt=ce(Ae),Ut="\uFEFF",Yt=["auction_url","bid_price","shipping_fee"];function Ie(b,S,r){const w=atob(b);if(S==="csv")return ze(w,r);const u=Fe(w),o=Te(u,r);return Ut+o.map(s=>s.map(Re).join(",")).join(`
`)}function ze(b,S){const r=Be(b),w=Pe(b);if(w.length===0)return Ut;const u=S.bidPrice??0,o=S.shippingFee??0,s=S.auctionUrl,n=s.includes(r)?`"${s.replace(/"/g,'""')}"`:s,l=`${r}${Yt.join(r)}`,v=`${r}${n}${r}${u}${r}${o}`,y=`${r}${r}${r}`,p=w.map((m,i)=>i===0?m+l:i===1?m+v:m+y);return Ut+p.join(`
`)}function Be(b){const S=b.indexOf(`
`),r=S===-1?b:b.substring(0,S),w=[",","	",";","|"];let u=",",o=0;for(const s of w){let n=0,l=!1;for(const v of r)v==='"'?l=!l:v===s&&!l&&n++;n>o&&(o=n,u=s)}return u}function Pe(b){const S=[];let r="",w=!1,u=!1;for(let o=0;o<b.length;o++){const s=b[o];if(s==='"')w=!w,r+=s;else if(s==="\r")if(w)r+=s;else{if(b[o+1]===`
`)continue;S.push(r),r=""}else s===`
`?w?(u=!0,r+=s):(S.push(r),r=""):r+=s}return r.length>0&&S.push(r),u&&console.warn("raw-metadata: CSV contains embedded newlines in quoted fields  preserved in output"),S}function Fe(b){const S=new Uint8Array(b.length);for(let s=0;s<b.length;s++)S[s]=b.charCodeAt(s);const r=de(S,{type:"array"}),w=r.SheetNames[0];if(!w)return[];const u=r.Sheets[w];return u?fe.sheet_to_json(u,{header:1,raw:!1,defval:""}):[]}function Te(b,S){if(b.length===0)return[];const r=S.bidPrice??0,w=S.shippingFee??0,u=[S.auctionUrl,String(r),String(w)],o=["","",""];return b.map((s,n)=>n===0?[...s,...Yt]:n===1?[...s,...u]:[...s,...o])}function Re(b){return b.includes(",")||b.includes('"')||b.includes(`
`)||b.includes("\r")?`"${b.replace(/"/g,'""')}"`:b}async function Oe(b){const S=new Xt,r=new Set;for(const w of b){const u=Ie(w.data,w.fileType,{auctionUrl:w.auctionUrl,bidPrice:w.bidPrice,shippingFee:w.shippingFee}),s=new TextEncoder().encode(u);let n=Ue(w.filename,w.retailer);if(r.has(n)){const l=n.replace(/\.csv$/i,"");let v=2;for(;r.has(`${l}_${v}.csv`);)v++;n=`${l}_${v}.csv`}r.add(n),S.file(n,s)}return await S.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}async function Le(b){const S=new Xt,r=new Set;for(const w of b){let u=w.filename;if(u.toLowerCase().endsWith(".csv")||(u=u.replace(/\.[^.]+$/,"")+".csv"),r.has(u)){const o=u.replace(/\.csv$/i,"");let s=2;for(;r.has(`${o}_${s}.csv`);)s++;u=`${o}_${s}.csv`}r.add(u),S.file(u,w.csvContent)}return await S.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}})}function Ue(b,S){let r=b.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").trim();r.toLowerCase().endsWith(".csv")||(r=r.replace(/\.[^.]+$/,"")+".csv");const w=S.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return r.toLowerCase().includes(w)||(r=`${w}_${r}`),r.length>100&&(r=r.substring(0,90)+".csv"),r}function Jt(b,S="manifests.zip"){const r=URL.createObjectURL(b),w=document.createElement("a");w.href=r,w.download=S,document.body.appendChild(w),w.click(),document.body.removeChild(w),setTimeout(()=>URL.revokeObjectURL(r),100)}function Qt(b){return`manifests_${new Date().toISOString().split("T")[0]}_${b}files.zip`}const te=/[\x00-\x1F\x7F\u200B-\u200F\uFEFF]/g;function Bt(b){return b.replace(te,"").trim()}function De(b){return{item_number:b.item_number.replace(te,"").replace(/\s/g,""),product_name:Bt(b.product_name),qty:b.qty,unit_retail:b.unit_retail,auction_url:Bt(b.auction_url),bid_price:Bt(b.bid_price),shipping_fee:Bt(b.shipping_fee)}}function Ne(b){if(b==="")return"";const r=b.toLowerCase().replace(/^0+/,"");return r===""?"0":r}function Me(b){if(b.length===0)return[];const S=[],r=[];for(const o of b)o.item_number===""?S.push(o):r.push(o);const w=new Map;for(const o of r){const s=Ne(o.item_number),n=w.get(s);n?n.push(o):w.set(s,[o])}const u=[];for(const o of w.values())o.length===1?u.push(o[0]):u.push(je(o));return[...u,...S]}function je(b){const S=b[0],r=b.reduce((s,n)=>s+n.qty,0),w=Math.max(...b.map(s=>s.unit_retail));let u=S;for(const s of b)s.qty>u.qty&&(u=s);let o=S.item_number;for(const s of b)s.item_number.length>o.length&&(o=s.item_number);return{item_number:o,product_name:u.product_name,qty:r,unit_retail:w,auction_url:S.auction_url,bid_price:S.bid_price,shipping_fee:S.shipping_fee}}function $e(b){return b.length===0?[]:[...b].sort((S,r)=>{const w=S.unit_retail,u=r.unit_retail,o=w===0,s=u===0;return o&&!s?1:!o&&s?-1:w!==u?u-w:S.product_name.toLowerCase().localeCompare(r.product_name.toLowerCase())})}function Ze(b){if(b.length===0)return[];const S=b.map(De),r=Me(S);return $e(r)}const We=["item_number","product_name","qty","unit_retail","auction_url","bid_price","shipping_fee"],He="\uFEFF";function Rt(b,S){if(b.length===0)return[];const r=b.map(u=>({item_number:u.upc,product_name:u.productName,qty:Math.round(u.quantity),unit_retail:u.unitRetail,auction_url:"",bid_price:"",shipping_fee:""})),w=Ze(r);return w.length>0&&(w[0]={...w[0],auction_url:S.auctionUrl,bid_price:S.bidPrice!==null?Dt(S.bidPrice):"",shipping_fee:S.shippingFee!==null?Dt(S.shippingFee):""}),w}function Ot(b,S){const r=[];r.push(We.join(","));for(const w of b){const u=[xt(w.item_number),xt(w.product_name),w.qty.toString(),Dt(w.unit_retail),xt(w.auction_url),xt(w.bid_price),xt(w.shipping_fee)];r.push(u.join(","))}return He+r.join(`
`)}function Dt(b){return String(Number(b.toFixed(2)))}function xt(b){return b.includes(",")||b.includes('"')||b.includes(`
`)||b.includes("\r")?`"${b.replace(/"/g,'""')}"`:b}const W={isSignedIn:!1,sheetUrl:"",urls:[],uploadedFiles:[],isProcessing:!1,isCancelled:!1,lastZipBlob:null,results:{files:0,items:0,retailValue:0},processingProgress:null,formatMode:"raw"};async function bt(){const b={sheetUrl:W.sheetUrl,urls:W.urls,results:W.results,isProcessing:W.isProcessing,processingProgress:W.processingProgress,formatMode:W.formatMode};await chrome.storage.local.set({popupState:b})}async function qe(){const b=await chrome.storage.local.get(["popupState"]);if(b.popupState){const S=b.popupState;W.sheetUrl=S.sheetUrl||"",W.urls=S.urls||[],W.results=S.results||{files:0,items:0,retailValue:0},W.isProcessing=S.isProcessing||!1,W.processingProgress=S.processingProgress||null,W.formatMode=S.formatMode||"raw"}}const G={formatToggle:document.getElementById("format-toggle"),labelRaw:document.getElementById("label-raw"),labelUnified:document.getElementById("label-unified"),signedOut:document.getElementById("signed-out"),signedIn:document.getElementById("signed-in"),signInBtn:document.getElementById("sign-in-btn"),signOutBtn:document.getElementById("sign-out-btn"),sheetUrl:document.getElementById("sheet-url"),loadSheetBtn:document.getElementById("load-sheet-btn"),urlListSection:document.getElementById("url-list-section"),urlList:document.getElementById("url-list"),urlCount:document.getElementById("url-count"),selectAll:document.getElementById("select-all"),manualSection:document.getElementById("manual-section"),toggleManual:document.getElementById("toggle-manual"),dropZone:document.getElementById("drop-zone"),fileInput:document.getElementById("file-input"),uploadBtn:document.getElementById("upload-btn"),processBtn:document.getElementById("process-btn"),progressSection:document.getElementById("progress-section"),progressBar:document.getElementById("progress-bar"),progressLabel:document.getElementById("progress-label"),progressPercent:document.getElementById("progress-percent"),progressDetail:document.getElementById("progress-detail"),cancelBtn:document.getElementById("cancel-btn"),resultsSection:document.getElementById("results-section"),resultFiles:document.getElementById("result-files"),resultItems:document.getElementById("result-items"),resultValue:document.getElementById("result-value"),downloadAgainBtn:document.getElementById("download-again-btn"),resetBtn:document.getElementById("reset-btn"),proxySection:document.getElementById("proxy-section"),toggleProxy:document.getElementById("toggle-proxy"),proxyEnabled:document.getElementById("proxy-enabled"),proxyHost:document.getElementById("proxy-host"),proxyPort:document.getElementById("proxy-port"),proxyUsername:document.getElementById("proxy-username"),proxyPassword:document.getElementById("proxy-password"),saveProxyBtn:document.getElementById("save-proxy-btn"),proxyStatus:document.getElementById("proxy-status")};async function Ge(){Ve(),await qe(),await Ke(),await Je(),W.sheetUrl&&(G.sheetUrl.value=W.sheetUrl),W.urls.length>0&&St(),W.results.files>0&&ae(),W.isProcessing&&W.processingProgress&&(se(),yt(W.processingProgress.current/W.processingProgress.total*100,`Processing ${W.processingProgress.currentUrl}...`)),G.formatToggle.checked=W.formatMode==="unified",ee(),pt()}function Ve(){G.formatToggle.addEventListener("change",tr),G.signInBtn.addEventListener("click",Xe),G.signOutBtn.addEventListener("click",Ye),G.sheetUrl.addEventListener("input",er),G.loadSheetBtn.addEventListener("click",rr),G.selectAll.addEventListener("change",nr),G.toggleManual.addEventListener("click",()=>{G.manualSection.classList.toggle("collapsed");const b=G.manualSection.querySelector(".section-content");b==null||b.classList.toggle("hidden")}),G.uploadBtn.addEventListener("click",()=>G.fileInput.click()),G.fileInput.addEventListener("change",ir),G.dropZone.addEventListener("dragover",b=>{b.preventDefault(),G.dropZone.classList.add("drag-over")}),G.dropZone.addEventListener("dragleave",()=>{G.dropZone.classList.remove("drag-over")}),G.dropZone.addEventListener("drop",sr),G.processBtn.addEventListener("click",ar),G.cancelBtn.addEventListener("click",or),G.downloadAgainBtn.addEventListener("click",dr),G.resetBtn.addEventListener("click",fr),G.toggleProxy.addEventListener("click",()=>{G.proxySection.classList.toggle("collapsed");const b=G.proxySection.querySelector(".section-content");b==null||b.classList.toggle("hidden")}),G.saveProxyBtn.addEventListener("click",Qe)}async function Ke(){try{W.isSignedIn=await Se()}catch{W.isSignedIn=!1}Nt()}function Nt(){G.signedOut.classList.toggle("hidden",W.isSignedIn),G.signedIn.classList.toggle("hidden",!W.isSignedIn),G.loadSheetBtn.disabled=!W.isSignedIn||!re(W.sheetUrl)}async function Xe(){try{await Ft(!0),W.isSignedIn=!0,Nt()}catch(b){alert(`Sign in failed: ${b instanceof Error?b.message:"Unknown error"}`)}}async function Ye(){await Ce(),W.isSignedIn=!1,W.urls=[],Nt(),St(),pt()}async function Je(){try{const b=await he();if(G.proxyEnabled.checked=b.enabled,G.proxyHost.value=b.host,G.proxyPort.value=b.port.toString(),G.proxyUsername.value=b.username||"",G.proxyPassword.value=b.password||"",b.enabled&&b.host){const S=b.username?" (with auth)":"";G.proxyStatus.textContent=`Proxy active: ${b.host}:${b.port}${S}`,G.proxyStatus.className="help-text success"}else G.proxyStatus.textContent=""}catch(b){console.error("[ManifestParser] Failed to load proxy settings:",b)}}async function Qe(){const b=G.proxyUsername.value.trim(),S=G.proxyPassword.value,r={enabled:G.proxyEnabled.checked,host:G.proxyHost.value.trim(),port:parseInt(G.proxyPort.value,10)||8080,username:b||void 0,password:S||void 0,sites:["techliquidators.com"]};try{if(await _e(r),r.enabled&&r.host){const w=r.username?" (with auth)":"";G.proxyStatus.textContent=`Proxy saved: ${r.host}:${r.port}${w}`,G.proxyStatus.className="help-text success"}else G.proxyStatus.textContent="Proxy disabled",G.proxyStatus.className="help-text"}catch(w){G.proxyStatus.textContent=`Error: ${w instanceof Error?w.message:"Failed to save"}`,G.proxyStatus.className="help-text error"}}async function tr(){W.formatMode=G.formatToggle.checked?"unified":"raw",ee(),await bt()}function ee(){const b=W.formatMode==="unified";G.labelRaw.classList.toggle("active",!b),G.labelUnified.classList.toggle("active",b)}function er(){W.sheetUrl=G.sheetUrl.value.trim(),G.loadSheetBtn.disabled=!W.isSignedIn||!re(W.sheetUrl)}function re(b){return b.includes("docs.google.com/spreadsheets")&&!!Gt(b)}async function rr(){const b=Gt(W.sheetUrl);if(!b){alert("Invalid Google Sheets URL");return}G.loadSheetBtn.disabled=!0,G.loadSheetBtn.textContent="Loading...";try{const{urls:S}=await xe(b);W.urls=S.map(r=>({url:r,retailer:me(r),selected:!0})),await bt(),St(),pt()}catch(S){alert(`Failed to load sheet: ${S instanceof Error?S.message:"Unknown error"}`)}finally{G.loadSheetBtn.disabled=!1,G.loadSheetBtn.textContent="Load"}}function St(){if(W.urls.length===0){G.urlListSection.classList.add("hidden");return}G.urlListSection.classList.remove("hidden"),G.urlCount.textContent=W.urls.length.toString(),G.urlList.innerHTML=W.urls.map((b,S)=>`
      <li>
        <input type="checkbox" data-index="${S}" ${b.selected?"checked":""}>
        <span class="url-text" title="${b.url}">${ne(b.url)}</span>
        <span class="retailer-badge">${pe(b.retailer)}</span>
      </li>
    `).join(""),G.urlList.querySelectorAll('input[type="checkbox"]').forEach(b=>{b.addEventListener("change",S=>{const r=S.target,w=parseInt(r.dataset.index||"0",10);W.urls=W.urls.map((u,o)=>o===w?{...u,selected:r.checked}:u),Zt(),pt()})}),Zt()}function ne(b){try{const S=new URL(b),r=S.pathname.split("/").pop()||S.hostname;return r.length>40?r.substring(0,37)+"...":r}catch{return b.substring(0,40)}}function Zt(){const b=W.urls.every(r=>r.selected),S=W.urls.some(r=>r.selected);G.selectAll.checked=b,G.selectAll.indeterminate=S&&!b}function nr(){const b=G.selectAll.checked;W.urls=W.urls.map(S=>({...S,selected:b})),St(),pt()}function ir(b){const S=b.target;S.files&&(W.uploadedFiles=Array.from(S.files),pt())}function sr(b){var S;if(b.preventDefault(),G.dropZone.classList.remove("drag-over"),(S=b.dataTransfer)!=null&&S.files){const r=Array.from(b.dataTransfer.files).filter(w=>/\.(csv|xlsx|xls)$/i.test(w.name));W.uploadedFiles=r,pt()}}function pt(){const b=W.urls.some(r=>r.selected),S=W.uploadedFiles.length>0;G.processBtn.disabled=W.isProcessing||!b&&!S}async function ar(){W.isProcessing=!0,W.isCancelled=!1,pt(),se();const b=W.formatMode==="raw",S=[],r=[];let w=0,u=0;const o=W.urls.filter(l=>l.selected),s=o.length+W.uploadedFiles.length;let n=0;try{for(const y of o){if(W.isCancelled){console.log("[ManifestParser] Processing cancelled by user");break}W.processingProgress={current:n,total:s,currentUrl:ne(y.url)},await bt(),yt(n/s*100,`Extracting from ${y.retailer}...`);try{let p=y.retailer;if(ge(y.url)){const m=await pr(y.url);p=m.retailer;const i=mr(p,m.listingName,m.auctionEndTime);if(W.urls=W.urls.map(d=>d.url===y.url?{...d,retailer:p}:d),St(),m.manifestData&&m.manifestType)if(b){const d=m.manifestType,a=i.replace(/\.csv$/,`.${d}`);r.push({filename:a,data:m.manifestData,retailer:p,sourceUrl:y.url,fileType:m.manifestType,auctionUrl:y.url,bidPrice:m.bidPrice??0,shippingFee:m.shippingFee??0});try{const h=await Pt(m.manifestData,i,m.manifestType);w+=h.length,u+=h.reduce((c,_)=>c+_.unitRetail*_.quantity,0)}catch{}console.log(`[ManifestParser] Added raw entry: ${a}`)}else try{const d=await Pt(m.manifestData,i,m.manifestType);if(d.length>0){const a={auctionUrl:y.url,bidPrice:m.bidPrice??0,shippingFee:m.shippingFee??0},h=Rt(d,a),c=Ot(h,a);S.push({filename:i.replace(/\.(xlsx|xls)$/,".csv"),csvContent:c,retailer:p,sourceUrl:y.url}),w+=d.length,u+=d.reduce((_,x)=>_+x.unitRetail*x.quantity,0),console.log(`[ManifestParser] Added unified entry: ${i}, ${d.length} items`)}else console.log(`[ManifestParser] No items parsed from ${y.url}`)}catch(d){throw console.error(`[ManifestParser] Failed to parse manifest from ${y.url}:`,d),new Error(`Failed to transform to unified format: ${d instanceof Error?d.message:"Parse error"}`)}else console.log(`[ManifestParser] No manifest data for ${y.url}`)}else{console.log(`[ManifestParser] Direct download: ${y.url}`);const m=await lr(y.url);if(m.data){const i=cr(y.url,p);if(b){r.push({filename:i,data:m.data,retailer:p,sourceUrl:y.url,fileType:m.type,auctionUrl:y.url,bidPrice:0,shippingFee:0});try{const d=await Pt(m.data,i,m.type);w+=d.length,u+=d.reduce((a,h)=>a+h.unitRetail*h.quantity,0)}catch{}console.log(`[ManifestParser] Added raw entry: ${i}`)}else try{const d=await Pt(m.data,i,m.type);if(d.length>0){const a={auctionUrl:y.url,bidPrice:0,shippingFee:0},h=Rt(d,a),c=Ot(h,a);S.push({filename:i.replace(/\.(xlsx|xls)$/,".csv"),csvContent:c,retailer:p,sourceUrl:y.url}),w+=d.length,u+=d.reduce((_,x)=>_+x.unitRetail*x.quantity,0)}}catch(d){throw console.error(`[ManifestParser] Failed to parse ${y.url}:`,d),new Error(`Failed to transform to unified format: ${d instanceof Error?d.message:"Parse error"}`)}}}}catch(p){if(console.error(`Failed to process ${y.url}:`,p),!b)throw p}n++}for(const y of W.uploadedFiles){if(W.isCancelled){console.log("[ManifestParser] Processing cancelled by user");break}yt(n/s*100,`Processing ${y.name}...`);try{if(b){const p=await ie(y);r.push({filename:y.name,data:p,retailer:"manual",sourceUrl:"local-upload",fileType:Mt(y.name),auctionUrl:"local-upload",bidPrice:0,shippingFee:0});try{const m=await Wt(y);w+=m.length,u+=m.reduce((i,d)=>i+d.unitRetail*d.quantity,0)}catch{}console.log(`[ManifestParser] Added raw entry: ${y.name}`)}else{const p=await Wt(y);if(p.length>0){const m={auctionUrl:"local-upload",bidPrice:0,shippingFee:0},i=Rt(p,m),d=Ot(i,m);S.push({filename:y.name.replace(/\.(xlsx|xls)$/,".csv"),csvContent:d,retailer:"manual",sourceUrl:"local-upload"}),w+=p.length,u+=p.reduce((a,h)=>a+h.unitRetail*h.quantity,0)}}}catch(p){if(console.error(`Failed to process ${y.name}:`,p),!b)throw p}n++}if(W.isCancelled){yt(0,"Cancelled"),Et();return}yt(95,"Creating ZIP file...");const l=b?r.length:S.length;if(l===0){alert("No valid manifest data found"),Et();return}const v=b?await Oe(r):await Le(S);W.lastZipBlob=v,W.results.files=l,W.results.items=w,W.results.retailValue=u,yt(100,"Complete!"),Jt(v,Qt(l)),W.processingProgress=null,await bt(),setTimeout(()=>{Et(),ae()},500)}catch(l){alert(`Processing failed: ${l instanceof Error?l.message:"Unknown error"}`),Et()}finally{W.isProcessing=!1,W.processingProgress=null,await bt(),pt()}}function or(){W.isCancelled=!0,W.isProcessing=!1,W.processingProgress=null,yt(0,"Cancelling..."),console.log("[ManifestParser] Cancel requested"),setTimeout(()=>{Et(),pt()},500)}async function lr(b){try{const S=await fetch(b);if(!S.ok)throw new Error(`HTTP ${S.status}`);const r=await S.blob(),w=await ur(r),u=Mt(b);return{data:w,type:u}}catch(S){return console.error(`[ManifestParser] Failed to download ${b}:`,S),{data:null,type:"csv"}}}function ur(b){return new Promise((S,r)=>{const w=new FileReader;w.onload=()=>{const u=w.result;S(u.split(",")[1]||u)},w.onerror=r,w.readAsDataURL(b)})}async function Wt(b){const S=await ie(b),r=await chrome.runtime.sendMessage({type:"PARSE_FILE",payload:{data:S,filename:b.name,type:Mt(b.name)}});if(r!=null&&r.error)throw new Error(r.error);return(r==null?void 0:r.payload)||[]}function ie(b){return new Promise((S,r)=>{const w=new FileReader;w.onload=()=>{const u=w.result;S(u.split(",")[1])},w.onerror=r,w.readAsDataURL(b)})}async function Pt(b,S,r){const w=await chrome.runtime.sendMessage({type:"PARSE_FILE",payload:{data:b,filename:S,type:r}});if(w!=null&&w.error)throw new Error(w.error);return(w==null?void 0:w.payload)||[]}function cr(b,S){try{const u=new URL(b).pathname.split("/").pop();if(u&&/\.(csv|xlsx|xls)$/i.test(u))return u}catch{}const r=new Date().toISOString().split("T")[0];return`${S}_manifest_${r}.csv`}function Mt(b){const S=b.toLowerCase();return S.includes(".xlsx")?"xlsx":S.includes(".xls")?"xls":"csv"}function se(){G.progressSection.classList.remove("hidden"),G.resultsSection.classList.add("hidden")}function yt(b,S){G.progressBar.style.width=`${b}%`,G.progressPercent.textContent=`${Math.round(b)}%`,G.progressDetail.textContent=S}function Et(){G.progressSection.classList.add("hidden")}function ae(){G.resultsSection.classList.remove("hidden"),G.resultFiles.textContent=W.results.files.toString(),G.resultItems.textContent=W.results.items.toLocaleString(),G.resultValue.textContent=`$${W.results.retailValue.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0})}`}function dr(){W.lastZipBlob&&Jt(W.lastZipBlob,Qt(W.results.files))}async function fr(){W.urls=[],W.uploadedFiles=[],W.lastZipBlob=null,W.results={files:0,items:0,retailValue:0},W.isProcessing=!1,W.processingProgress=null,G.urlListSection.classList.add("hidden"),G.resultsSection.classList.add("hidden"),G.fileInput.value="",await bt(),pt()}const Ht=1500,qt=3e4;function hr(b){return new Promise((S,r)=>{let w=!1;const u=()=>{w=!0,chrome.tabs.onUpdated.removeListener(o)},o=(n,l)=>{n===b&&l.status==="complete"&&!w&&(u(),clearTimeout(s),setTimeout(S,Ht))},s=setTimeout(()=>{w||(u(),r(new Error(`Tab load timeout after ${qt}ms`)))},qt);chrome.tabs.get(b,n=>{if(chrome.runtime.lastError){u(),clearTimeout(s),r(new Error(chrome.runtime.lastError.message));return}n.status==="complete"&&!w?(u(),clearTimeout(s),setTimeout(S,Ht)):chrome.tabs.onUpdated.addListener(o)})})}async function pr(b){var u,o;const S=ye.findByUrl(b);if(!S)return console.warn(`[ManifestParser] No retailer module found for URL: ${b}`),{retailer:"Unknown",listingName:"Unknown Listing",auctionEndTime:null,manifestData:null,manifestType:null,bidPrice:null,shippingFee:null};console.log(`[ManifestParser] Using retailer module: ${S.id}`);const r=await chrome.tabs.create({url:b,active:!1});if(!r.id)throw new Error("Failed to create tab");const w=r.id;try{await hr(w);let s=S.displayName,n="Listing",l=null,v=null,y=null;try{console.log(`[ManifestParser] Extracting metadata from tab ${w}`),console.log("[ManifestParser] Metadata function:",S.extractMetadata.toString().substring(0,200));const i=await chrome.scripting.executeScript({target:{tabId:w},func:S.extractMetadata});if(console.log("[ManifestParser] Metadata result:",i),(u=i[0])!=null&&u.result){const d=i[0].result;s=d.retailer,n=d.listingName,l=d.auctionEndTime,v=d.bidPrice,y=d.shippingFee}else console.warn("[ManifestParser] No metadata result. Full result:",JSON.stringify(i));console.log(`[ManifestParser] Metadata - Retailer: ${s}, Listing: ${n}`)}catch(i){console.error("[ManifestParser] Failed to extract metadata:",i),console.error("[ManifestParser] Error details:",i instanceof Error?i.stack:i)}let p=null,m=null;try{console.log(`[ManifestParser] Executing download in MAIN world (strategy: ${S.downloadStrategy})`),console.log("[ManifestParser] Function to execute:",S.downloadManifest.toString().substring(0,200));const i=await chrome.scripting.executeScript({target:{tabId:w},world:"MAIN",func:S.downloadManifest});if(console.log("[ManifestParser] Download result:",i),(o=i[0])!=null&&o.result){const d=i[0].result;if(p=d.data,m=d.type,!p&&d.downloadUrl){console.log(`[ManifestParser] Fetching file from URL: ${d.downloadUrl}`);try{const a=await fetch(d.downloadUrl);if(a.ok){const h=await a.blob();p=await new Promise(_=>{const x=new FileReader;x.onloadend=()=>{const A=x.result;_(A.split(",")[1]||"")},x.readAsDataURL(h)}),console.log(`[ManifestParser] Fetched file: ${m}, ${(p==null?void 0:p.length)||0} chars`)}else console.error(`[ManifestParser] Fetch failed: ${a.status}`)}catch(a){console.error("[ManifestParser] Fetch error:",a)}}else console.log(`[ManifestParser] Captured manifest: ${m}, ${(p==null?void 0:p.length)||0} chars`)}else console.warn("[ManifestParser] No result from download script. Full result:",JSON.stringify(i))}catch(i){console.error("[ManifestParser] Failed to capture manifest:",i),console.error("[ManifestParser] Error details:",i instanceof Error?i.stack:i)}return p||console.log(`[ManifestParser] No manifest data captured for ${b}`),{retailer:s,listingName:n,auctionEndTime:l,manifestData:p,manifestType:m,bidPrice:v,shippingFee:y}}finally{try{await chrome.tabs.remove(w)}catch(s){console.warn(`[ManifestParser] Could not close tab ${w}:`,s)}}}function mr(b,S,r){const u=m=>m.replace(/[<>:"/\\|?*]/g,"").replace(/\s+/g,"-"),o=u(b);let s=u(S);const n=Math.max(10,50-o.length-1-4),l=s.split("-");let v="";if(l.length>=2){const m=l[l.length-1],i=l[l.length-2],d=/^\d{4}$/.test(m),a=/^[A-Z]{1,3}$/.test(i);d&&a?(v=`-${i}-${m}`,l.pop(),l.pop()):d?(v=`-${m}`,l.pop()):/^[A-Z]{1,3}$/.test(m)&&(v=`-${m}`,l.pop())}const y=n-v.length;let p=l.join("-");return p=ke(p,y),s=p+v,`${o}_${s}.csv`}document.addEventListener("DOMContentLoaded",Ge);
