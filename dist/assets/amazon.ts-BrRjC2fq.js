var u=Object.defineProperty;var h=(a,n,e)=>n in a?u(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e;var i=(a,n,e)=>h(a,typeof n!="symbol"?n+"":n,e);import{s as d,M as m}from"./detector-Bh9ZqayP.js";class v extends m{constructor(){super(...arguments);i(this,"siteName","amazon");i(this,"urlPatterns",[/amazon\.com\/dp\//i,/amazon\.com\/gp\/product\//i])}detectManifests(){const e=[];return e.push(...this.findManifestLinks()),e.push(...this.findAmazonCsvLinks()),this.deduplicateManifests(e)}isAuthenticated(){var t,s,c,o;const e=document.querySelector("#nav-link-accountList")!==null,r=((s=(t=document.querySelector("#nav-link-accountList"))==null?void 0:t.textContent)==null?void 0:s.includes("Hello,"))||!1,f=!((o=(c=document.querySelector("#nav-link-accountList"))==null?void 0:c.textContent)!=null&&o.includes("Sign in"));return e&&r&&f}findAmazonCsvLinks(){const e=[];return document.querySelectorAll("a").forEach(t=>{var o;const s=((o=t.textContent)==null?void 0:o.trim().toLowerCase())||"",c=t.href||"";(s.includes("download csv")||s.includes("download manifest")||s==="download csv")&&c&&!c.startsWith("javascript:")&&e.push({url:c,filename:this.extractFilename(c,"csv"),type:"csv"})}),document.querySelectorAll('a[href*=".csv"], a[href*="csv"], a[href*="manifest"]').forEach(t=>{if(t instanceof HTMLAnchorElement&&t.href){const s=t.href.toLowerCase();(s.includes(".csv")||s.includes("csv"))&&!s.startsWith("javascript:")&&(e.some(o=>o.url===t.href)||e.push({url:t.href,filename:this.extractFilename(t.href,"csv"),type:"csv"}))}}),e}}const l=new v;l.matches(window.location.href)&&d(l);
